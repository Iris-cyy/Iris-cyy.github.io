<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>花落知多少</title>
  
  <subtitle>Nice to meet you :)</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://iris-cyy.github.io/"/>
  <updated>2020-02-25T15:39:18.646Z</updated>
  <id>https://iris-cyy.github.io/</id>
  
  <author>
    <name>Irisssy</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>【Python】Basis</title>
    <link href="https://iris-cyy.github.io//Notes/Python/2020-02-25/python_basis/"/>
    <id>https://iris-cyy.github.io//Notes/Python/2020-02-25/python_basis/</id>
    <published>2020-02-25T10:09:53.000Z</published>
    <updated>2020-02-25T15:39:18.646Z</updated>
    
    <content type="html"><![CDATA[<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><h3 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h3><ul><li><p>数字、字母、下划线</p></li><li><p>必须以字母或下划线开头，不能以数字开头</p></li><li><p>大小写敏感</p></li><li><p>不能是关键字（保留字）</p><ul><li><p>Python2 的关键字：<br><img src="/images/python/python-basis.assets/image-20200225182820298.png" alt="image-20200225182820298"></p></li><li><p>Python3 的关键字<br><img src="/images/python/python-basis.assets/image-20200225183717669.png" alt="image-20200225183717669"></p></li></ul></li></ul><h3 id="id函数"><a href="#id函数" class="headerlink" title="id函数"></a><code>id</code>函数</h3><p>变量将名字和对象关联起来，赋值操作并不会实际复制值，只是为数据对象取相关名字。名字是对象的引用而不是对象本身。</p><p>小整数（-5 ～ 256）直接作为对象存储，地址固定，而其他的整数地址要临时分配</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">7</span></span><br><span class="line">b = <span class="number">7</span></span><br><span class="line">id(a) == id(b) <span class="comment">#true</span></span><br><span class="line"></span><br><span class="line">c = <span class="number">1000</span></span><br><span class="line">d = <span class="number">1000</span></span><br><span class="line">id(c) == id(d) <span class="comment">#false</span></span><br></pre></td></tr></table></figure><p><code>del()</code>函数用于删除变量</p><p><br></p><h2 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h2><h3 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h3><p><code>input()</code>：读入一整行作为字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &lt;变量&gt; = input(&lt;提示性文字&gt;)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>input(<span class="string">"请输入："</span>)</span><br><span class="line">请输入：</span><br></pre></td></tr></table></figure><h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><p><code>print()</code>：以字符形式输出变量，可以输出各种类型变量的值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="number">3</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line">&gt;&gt;&gt;print(<span class="number">3</span>, <span class="number">7</span>)</span><br><span class="line"><span class="number">3</span> <span class="number">7</span></span><br><span class="line">&gt;&gt;&gt;b, c = <span class="number">3</span>, <span class="number">4</span></span><br><span class="line">&gt;&gt;&gt;print(b, c, <span class="number">5</span>)</span><br><span class="line"><span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br></pre></td></tr></table></figure><p>更改<code>end</code>参数可以做到不换行输出等（<code>end</code>默认是<code>\n</code>）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="number">3</span>, end=<span class="string">''</span>)</span><br><span class="line">print(<span class="number">4</span>, end=<span class="string">''</span>)</span><br><span class="line"><span class="comment">#输出34</span></span><br></pre></td></tr></table></figure><p>通过<code>%</code>来选择要输出的变量</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># "&lt;格式字符串&gt;" %(&lt;输出对象&gt;, &lt;输出对象&gt; ...)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">"Celsuis: %3d Fahr: %6.1f"</span> %(celsuis, fahr))</span><br></pre></td></tr></table></figure><h4 id="格式化输出"><a href="#格式化输出" class="headerlink" title="格式化输出"></a>格式化输出</h4><h5 id=""><a href="#" class="headerlink" title="%"></a><code>%</code></h5><p>整数：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%o'</span> %<span class="number">20</span>) <span class="comment"># %o 八进制</span></span><br><span class="line"><span class="number">2</span> <span class="number">24</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%d'</span> %<span class="number">20</span>) <span class="comment"># %d 十进制</span></span><br><span class="line"><span class="number">4</span> <span class="number">20</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%x'</span> %<span class="number">20</span>) <span class="comment"># %x 十六进制</span></span><br><span class="line"><span class="number">6</span> <span class="number">14</span></span><br></pre></td></tr></table></figure><p>浮点数：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># %f ——保留小数点后面六位有效数字</span></span><br><span class="line"><span class="comment"># 　　%.3f，保留3位小数位</span></span><br><span class="line"><span class="comment"># %e ——保留小数点后面六位有效数字，指数形式输出</span></span><br><span class="line"><span class="comment"># 　　%.3e，保留3位小数位，使用科学计数法</span></span><br><span class="line"><span class="comment"># %g ——在保证六位有效数字的前提下，使用小数方式，否则使用科学计数法</span></span><br><span class="line"><span class="comment"># 　　%.3g，保留3位有效数字，使用小数或科学计数法</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%f'</span> % <span class="number">1.11</span>)  <span class="comment"># 默认保留6位小数</span></span><br><span class="line"><span class="number">1.110000</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%.1f'</span> % <span class="number">1.11</span>)  <span class="comment"># 取1位小数</span></span><br><span class="line"><span class="number">1.1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%e'</span> % <span class="number">1.11</span>)  <span class="comment"># 默认6位小数，用科学计数法</span></span><br><span class="line"><span class="number">1.110000e+00</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%.3e'</span> % <span class="number">1.11</span>)  <span class="comment"># 取3位小数，用科学计数法</span></span><br><span class="line"><span class="number">1.110e+00</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%g'</span> % <span class="number">1111.1111</span>)  <span class="comment"># 默认6位有效数字</span></span><br><span class="line"><span class="number">1111.11</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%.7g'</span> % <span class="number">1111.1111</span>)  <span class="comment"># 取7位有效数字</span></span><br><span class="line"><span class="number">1111.111</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%.2g'</span> % <span class="number">1111.1111</span>)  <span class="comment"># 取2位有效数字，自动转换为科学计数法</span></span><br><span class="line"><span class="number">1.1e+03</span></span><br></pre></td></tr></table></figure><p>字符串：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># %s</span></span><br><span class="line"><span class="comment"># %10s——右对齐，占位符10位</span></span><br><span class="line"><span class="comment"># %-10s——左对齐，占位符10位</span></span><br><span class="line"><span class="comment"># %.2s——截取2位字符串</span></span><br><span class="line"><span class="comment"># %10.2s——10位占位符，截取两位字符串</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%s'</span> % <span class="string">'hello world'</span>)  <span class="comment"># 字符串输出</span></span><br><span class="line">hello world</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%20s'</span> % <span class="string">'hello world'</span>)  <span class="comment"># 右对齐，取20位，不够则补位</span></span><br><span class="line">         hello world</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%-20s'</span> % <span class="string">'hello world'</span>)  <span class="comment"># 左对齐，取20位，不够则补位</span></span><br><span class="line">hello world         </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%.2s'</span> % <span class="string">'hello world'</span>)  <span class="comment"># 取2位</span></span><br><span class="line">he</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%10.2s'</span> % <span class="string">'hello world'</span>)  <span class="comment"># 右对齐，取2位</span></span><br><span class="line">        he</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%-10.2s'</span> % <span class="string">'hello world'</span>)  <span class="comment"># 左对齐，取2位</span></span><br><span class="line">he</span><br></pre></td></tr></table></figure><h5 id="format-函数"><a href="#format-函数" class="headerlink" title="format()函数"></a><code>format()</code>函数</h5><p>基本格式：<code>str.format()</code></p><p>位置匹配：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(format(<span class="number">57.467645</span>, <span class="string">".3f"</span>))</span><br><span class="line"><span class="number">57.468</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;&#125; &#123;&#125;'</span>.format(<span class="string">'hello'</span>,<span class="string">'world'</span>))  <span class="comment"># 不带字段</span></span><br><span class="line">hello world</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;0&#125; &#123;1&#125;'</span>.format(<span class="string">'hello'</span>,<span class="string">'world'</span>))  <span class="comment"># 带数字编号</span></span><br><span class="line">hello world</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;0&#125; &#123;1&#125; &#123;0&#125;'</span>.format(<span class="string">'hello'</span>,<span class="string">'world'</span>))  <span class="comment"># 打乱顺序</span></span><br><span class="line">hello world hello</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;1&#125; &#123;1&#125; &#123;0&#125;'</span>.format(<span class="string">'hello'</span>,<span class="string">'world'</span>))</span><br><span class="line">world world hello</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;a&#125; &#123;tom&#125; &#123;a&#125;'</span>.format(tom=<span class="string">'hello'</span>,a=<span class="string">'world'</span>))  <span class="comment"># 带关键字</span></span><br><span class="line">world hello world</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;&#125; and &#123;&#125;'</span>.format(<span class="string">'hello'</span>,<span class="string">'world'</span>))  <span class="comment"># 默认左对齐</span></span><br><span class="line">hello <span class="keyword">and</span> world</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;:10s&#125; and &#123;:&gt;10s&#125;'</span>.format(<span class="string">'hello'</span>,<span class="string">'world'</span>))  <span class="comment"># 取10位左对齐，取10位右对齐</span></span><br><span class="line">hello      <span class="keyword">and</span>      world</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;:^10s&#125; and &#123;:^10s&#125;'</span>.format(<span class="string">'hello'</span>,<span class="string">'world'</span>))  <span class="comment"># 取10位中间对齐</span></span><br><span class="line">  hello    <span class="keyword">and</span>   world   </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;&#125; is &#123;:.2f&#125;'</span>.format(<span class="number">1.123</span>,<span class="number">1.123</span>))  <span class="comment"># 取2位小数</span></span><br><span class="line"><span class="number">1.123</span> <span class="keyword">is</span> <span class="number">1.12</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;0&#125; is &#123;0:&gt;10.2f&#125;'</span>.format(<span class="number">1.123</span>))  <span class="comment"># 取2位小数，右对齐，取10位</span></span><br><span class="line"><span class="number">1.123</span> <span class="keyword">is</span>       <span class="number">1.12</span></span><br></pre></td></tr></table></figure><p>多种格式化：</p><ul><li><p>‘b’ - 二进制。将数字以2为基数进行输出。</p></li><li><p>‘c’ - 字符。在打印之前将整数转换成对应的Unicode字符串。</p></li><li><p>‘d’ - 十进制整数。将数字以10为基数进行输出。</p></li><li><p>‘o’ - 八进制。将数字以8为基数进行输出。</p></li><li><p>‘x’ - 十六进制。将数字以16为基数进行输出，9以上的位数用小写字母。</p></li><li><p>‘e’ - 幂符号。用科学计数法打印数字。用’e’表示幂。</p></li><li><p>‘g’ - 一般格式。将数值以fixed-point格式输出。当数值特别大的时候，用幂形式打印。</p></li><li><p>‘n’ - 数字。当值为整数时和’d’相同，值为浮点数时和’g’相同。不同的是它会根据区域设置插入数字分隔符。</p></li><li><p>‘%’ - 百分数。将数值乘以100然后以fixed-point(‘f’)格式打印，值后面会有一个百分号。</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;0:b&#125;'</span>.format(<span class="number">3</span>))</span><br><span class="line"><span class="number">11</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;:c&#125;'</span>.format(<span class="number">20</span>))</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;:d&#125;'</span>.format(<span class="number">20</span>))</span><br><span class="line"><span class="number">20</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;:o&#125;'</span>.format(<span class="number">20</span>))</span><br><span class="line"><span class="number">24</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;:x&#125;'</span>.format(<span class="number">20</span>))</span><br><span class="line"><span class="number">14</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;:e&#125;'</span>.format(<span class="number">20</span>))</span><br><span class="line"><span class="number">2.000000e+01</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;:g&#125;'</span>.format(<span class="number">20.1</span>))</span><br><span class="line"><span class="number">20.1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;:f&#125;'</span>.format(<span class="number">20</span>))</span><br><span class="line"><span class="number">20.000000</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;:n&#125;'</span>.format(<span class="number">20</span>))</span><br><span class="line"><span class="number">20</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;:%&#125;'</span>.format(<span class="number">20</span>))</span><br><span class="line"><span class="number">2000.000000</span>%</span><br></pre></td></tr></table></figure><blockquote><p>格式化输出的做法还挺复杂的，以后写码的时候再具体看吧 ：）</p></blockquote><p><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;变量&quot;&gt;&lt;a href=&quot;#变量&quot; class=&quot;headerlink&quot; title=&quot;变量&quot;&gt;&lt;/a&gt;变量&lt;/h2&gt;&lt;h3 id=&quot;标识符&quot;&gt;&lt;a href=&quot;#标识符&quot; class=&quot;headerlink&quot; title=&quot;标识符&quot;&gt;&lt;/a&gt;标识符&lt;/h3&gt;&lt;u
      
    
    </summary>
    
      <category term="Notes" scheme="https://iris-cyy.github.io/categories/Notes/"/>
    
      <category term="Python" scheme="https://iris-cyy.github.io/categories/Notes/Python/"/>
    
    
      <category term="Notes" scheme="https://iris-cyy.github.io/tags/Notes/"/>
    
      <category term="Python" scheme="https://iris-cyy.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>【Python】Introduction</title>
    <link href="https://iris-cyy.github.io//Notes/Python/2020-02-25/python_intro/"/>
    <id>https://iris-cyy.github.io//Notes/Python/2020-02-25/python_intro/</id>
    <published>2020-02-25T09:50:55.000Z</published>
    <updated>2020-02-25T10:05:27.858Z</updated>
    
    <content type="html"><![CDATA[<h2 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h2><h3 id="ASCII"><a href="#ASCII" class="headerlink" title="ASCII"></a>ASCII</h3><p>文本编码，二进制编码表示字母、数字、专门符号</p><h3 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h3><p>业界标准，跨语言、跨平台（可表示汉字）</p><p>可变字节不可变长</p><p>用”\u”表示Unicode码</p><p><a href="https://unicode-table.com" target="_blank" rel="noopener">Unicode字符与编码对照表</a></p><h3 id="UTF-8"><a href="#UTF-8" class="headerlink" title="UTF-8"></a>UTF-8</h3><p>针对Unicode的<u>可变长度</u>字符编码</p><p>并非存储器中编码，使用时把Unicode字符转换为UTF-8</p><p>每一个ASCII字符有一个UTF-8编码，正好与8位ASCII编码一样</p><p><u>Python3默认为UTF-8编码</u></p><p><br></p><h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><p>面向对象</p><p>解释型语言</p><p>Python官网：<a href="https://www.python.org" target="_blank" rel="noopener">https://www.python.org</a></p><p>一些IDE：</p><ul><li><a href="https://www.jetbrains.com/pycharm/" target="_blank" rel="noopener">PyCharm</a></li><li><a href="https://github.com/spyder-ide/spyder" target="_blank" rel="noopener">Spyder</a></li><li><p><a href="https://thonny.org/" target="_blank" rel="noopener">Thonny</a></p></li><li><p><a href="https://www.sublimetext.com" target="_blank" rel="noopener">Sublime Text</a></p></li><li><a href="https://code.visualstudio.com/" target="_blank" rel="noopener">VS Code</a></li></ul><p>在线环境：</p><ul><li><a href="https://clin.icourse163.org/py" target="_blank" rel="noopener">https://clin.icourse163.org/py</a></li><li><a href="http://pythontutor.com/" target="_blank" rel="noopener">http://pythontutor.com/</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;编码&quot;&gt;&lt;a href=&quot;#编码&quot; class=&quot;headerlink&quot; title=&quot;编码&quot;&gt;&lt;/a&gt;编码&lt;/h2&gt;&lt;h3 id=&quot;ASCII&quot;&gt;&lt;a href=&quot;#ASCII&quot; class=&quot;headerlink&quot; title=&quot;ASCII&quot;&gt;&lt;/a&gt;ASCI
      
    
    </summary>
    
      <category term="Notes" scheme="https://iris-cyy.github.io/categories/Notes/"/>
    
      <category term="Python" scheme="https://iris-cyy.github.io/categories/Notes/Python/"/>
    
    
      <category term="Notes" scheme="https://iris-cyy.github.io/tags/Notes/"/>
    
      <category term="Python" scheme="https://iris-cyy.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>【PAT-Advanced】1012 The Best Rank</title>
    <link href="https://iris-cyy.github.io//PAT/Advanced/2020-02-16/pat_1012/"/>
    <id>https://iris-cyy.github.io//PAT/Advanced/2020-02-16/pat_1012/</id>
    <published>2020-02-16T09:56:28.000Z</published>
    <updated>2020-02-25T15:50:47.380Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>To evaluate the performance of our first year CS majored students, we consider their grades of three courses only: <code>C</code> - C Programming Language, <code>M</code> - Mathematics (Calculus or Linear Algrbra), and <code>E</code> - English. At the mean time, we encourage students by emphasizing on their best ranks – that is, among the four ranks with respect to the three courses and the average grade, we print the best rank for each student.</p><p>For example, The grades of <code>C</code>, <code>M</code>, <code>E</code> and <code>A</code> - Average of 4 students are given as the following:</p><blockquote><table><thead><tr><th>StudentID</th><th>C</th><th>M</th><th>E</th><th>A</th></tr></thead><tbody><tr><td>310101</td><td>98</td><td>85</td><td>88</td><td>90</td></tr><tr><td>310102</td><td>70</td><td>95</td><td>88</td><td>84</td></tr><tr><td>310103</td><td>82</td><td>87</td><td>94</td><td>88</td></tr><tr><td>310104</td><td>91</td><td>91</td><td>91</td><td>91</td></tr></tbody></table></blockquote><p>Then the best ranks for all the students are No.1 since the 1st one has done the best in C Programming Language, while the 2nd one in Mathematics, the 3rd one in English, and the last one in average.</p><h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains one test case. Each case starts with a line containing 2 numbers $N$ and $M (≤2000)$, which are the total number of students, and the number of students who would check their ranks, respectively. Then $N$ lines follow, each contains a student ID which is a string of 6 digits, followed by the three integer grades (in the range of [0, 100]) of that student in the order of <code>C</code>, <code>M</code> and <code>E</code>. Then there are $M$ lines, each containing a student ID.</p><h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>For each of the $M$ students, print in one line the best rank for him/her, and the symbol of the corresponding rank, separated by a space.</p><p>The priorities of the ranking methods are ordered as <code>A</code> &gt; <code>C</code> &gt; <code>M</code> &gt; <code>E</code>. Hence if there are two or more ways for a student to obtain the same best rank, output the one with the highest priority.</p><p>If a student is not on the grading list, simply output <code>N/A</code>.</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><blockquote><p>5 6<br>310101 98 85 88<br>310102 70 95 88<br>310103 82 87 94<br>310104 91 91 91<br>310105 85 90 90<br>310101<br>310102<br>310103<br>310104<br>310105<br>999999</p></blockquote><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><blockquote><p>1 C<br>1 M<br>1 E<br>1 A<br>3 A<br>N/A</p></blockquote><p><br></p><hr><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>题目不太难，比较考察对STL的应用</p><p>题目对算法复杂度要求不太高，所以直接用STL的sort函数排序，线性遍历</p><p>用到<code>vector</code>以及一些相关的函数</p><p>思路是，用<code>vector</code>存储学生的列表和分数的列表，将分数列表中的分数按从大到小排序之后，下标即对应排名（其中如果有相同分数，取最小的下标）</p><p>需要注意的是：</p><ul><li>相同分数的排序<br>如<code>95 90 90 88</code>排名是<code>1 2 2 4</code></li><li>优先级<code>A &gt; C &gt; M &gt; E</code></li><li>平均分取整（直接<code>int</code>就行）</li></ul><p>代码如下</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//0 1 2 3</span></span><br><span class="line"><span class="comment">//A C M E</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">int</span> grade[<span class="number">4</span>]; <span class="comment">//各科分数</span></span><br><span class="line">    <span class="keyword">int</span> rank[<span class="number">4</span>]; <span class="comment">//各科排名</span></span><br><span class="line">    <span class="keyword">int</span> bestRank; <span class="comment">//最高排名，0表示还没找</span></span><br><span class="line">    <span class="keyword">int</span> bestCourse; <span class="comment">//最高排名对应的学科</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;struct student&gt; students; <span class="comment">//学生列表</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; Rank[<span class="number">4</span>]; <span class="comment">//分数列表，下标对应排名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> course[<span class="number">4</span>] = &#123;<span class="string">'A'</span>, <span class="string">'C'</span>, <span class="string">'M'</span>, <span class="string">'E'</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> M, N;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a &gt; b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//找到该学生各科分数对应的排名</span></span><br><span class="line"><span class="function">struct student <span class="title">findRank</span><span class="params">(struct student stu)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ra, rc, rm, re;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;Rank[i].<span class="built_in">size</span>(); j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(Rank[i][j] == stu.grade[i])&#123;</span><br><span class="line">                stu.rank[i] = j + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>; <span class="comment">//注意这个break不能漏</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//找最高排名，标注对应课程</span></span><br><span class="line">    ra = stu.rank[<span class="number">0</span>];</span><br><span class="line">    rc = stu.rank[<span class="number">1</span>];</span><br><span class="line">    rm = stu.rank[<span class="number">2</span>];</span><br><span class="line">    re = stu.rank[<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">if</span>(ra &lt;= rc)&#123;</span><br><span class="line">        <span class="keyword">if</span>(ra &lt;= rm)&#123;</span><br><span class="line">            <span class="keyword">if</span>(ra &lt;= re)&#123;</span><br><span class="line">                stu.bestRank = ra;</span><br><span class="line">                stu.bestCourse = <span class="number">0</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                stu.bestRank = re;</span><br><span class="line">                stu.bestCourse = <span class="number">3</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(rm &lt;= re)&#123;</span><br><span class="line">                stu.bestRank = rm;</span><br><span class="line">                stu.bestCourse = <span class="number">2</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                stu.bestRank = re;</span><br><span class="line">                stu.bestCourse = <span class="number">3</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rc &lt;= rm)&#123;</span><br><span class="line">            <span class="keyword">if</span>(rc &lt;= re)&#123;</span><br><span class="line">                stu.bestRank = rc;</span><br><span class="line">                stu.bestCourse = <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                stu.bestRank = re;</span><br><span class="line">                stu.bestCourse = <span class="number">3</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(rm &lt;= re)&#123;</span><br><span class="line">                stu.bestRank = rm;</span><br><span class="line">                stu.bestCourse = <span class="number">2</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                stu.bestRank = re;</span><br><span class="line">                stu.bestCourse = <span class="number">3</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stu;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; N &gt;&gt; M;</span><br><span class="line">    <span class="keyword">int</span> id, c, m, e, a;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">student</span> <span class="title">newStu</span>;</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;N; i++)&#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; id &gt;&gt; c &gt;&gt; m &gt;&gt; e;</span><br><span class="line">        a = (c + m + e) / <span class="number">3</span>; <span class="comment">//平均分</span></span><br><span class="line">        newStu.id = id;</span><br><span class="line">        newStu.grade[<span class="number">0</span>] = a;</span><br><span class="line">        Rank[<span class="number">0</span>].push_back(a);</span><br><span class="line">        newStu.grade[<span class="number">1</span>] = c;</span><br><span class="line">        Rank[<span class="number">1</span>].push_back(c);</span><br><span class="line">        newStu.grade[<span class="number">2</span>] = m;</span><br><span class="line">        Rank[<span class="number">2</span>].push_back(m);</span><br><span class="line">        newStu.grade[<span class="number">3</span>] = e;</span><br><span class="line">        Rank[<span class="number">3</span>].push_back(e);</span><br><span class="line">        students.push_back(newStu);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//各分数列表按从高到低排序</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++)&#123;</span><br><span class="line">        sort(Rank[i].<span class="built_in">begin</span>(), Rank[i].<span class="built_in">end</span>(), cmp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;M; i++)&#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; id;</span><br><span class="line">        <span class="keyword">int</span> <span class="built_in">find</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;N; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(students[j].id == id)&#123;</span><br><span class="line">                <span class="built_in">find</span> = <span class="number">1</span>;</span><br><span class="line">                <span class="comment">//如果已经找到过最佳排名就不用再调一遍函数，直接输出就好。否则调函数求一下</span></span><br><span class="line">                <span class="comment">//（减少重复检索时候的复杂度）</span></span><br><span class="line">                <span class="keyword">if</span>(students[j].bestRank == <span class="number">0</span>)&#123; </span><br><span class="line">                    students[j] = findRank(students[j]);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; students[j].bestRank &lt;&lt; <span class="string">" "</span> &lt;&lt; course[students[j].bestCourse] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">find</span> == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"N/A"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Problem&quot;&gt;&lt;a href=&quot;#Problem&quot; class=&quot;headerlink&quot; title=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h2&gt;&lt;p&gt;To evaluate the performance of our first year CS m
      
    
    </summary>
    
      <category term="PAT" scheme="https://iris-cyy.github.io/categories/PAT/"/>
    
      <category term="Advanced" scheme="https://iris-cyy.github.io/categories/PAT/Advanced/"/>
    
    
      <category term="PAT" scheme="https://iris-cyy.github.io/tags/PAT/"/>
    
  </entry>
  
  <entry>
    <title>【PAT-Advanced】1011 World Cup Betting</title>
    <link href="https://iris-cyy.github.io//PAT/Advanced/2020-02-11/pat_1011/"/>
    <id>https://iris-cyy.github.io//PAT/Advanced/2020-02-11/pat_1011/</id>
    <published>2020-02-11T09:53:20.000Z</published>
    <updated>2020-02-11T09:57:06.659Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>With the 2010 FIFA World Cup running, football fans the world over were becoming increasingly excited as the best players from the best teams doing battles for the World Cup trophy in South Africa. Similarly, football betting fans were putting their money where their mouths were, by laying all manner of World Cup bets.</p><p>Chinese Football Lottery provided a “Triple Winning” game. The rule of winning was simple: first select any three of the games. Then for each selected game, bet on one of the three possible results – namely <code>W</code> for win, <code>T</code> for tie, and <code>L</code> for lose. There was an odd assigned to each result. The winner’s odd would be the product of the three odds times 65%.</p><p>For example, 3 games’ odds are given as the following:</p><blockquote><p> W    T    L<br>1.1  2.5  1.7<br>1.2  3.1  1.6<br>4.1  1.2  1.1</p></blockquote><p>To obtain the maximum profit, one must buy <code>W</code> for the 3rd game, <code>T</code> for the 2nd game, and <code>T</code> for the 1st game. If each bet takes 2 yuans, then the maximum profit would be (4.1×3.1×2.5×65%−1)×2=39.31 yuans (accurate up to 2 decimal places).</p><h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains one test case. Each case contains the betting information of 3 games. Each game occupies a line with three distinct odds corresponding to <code>W</code>, <code>T</code> and <code>L</code>.</p><h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>For each test case, print in one line the best bet of each game, and the maximum profit accurate up to 2 decimal places. The characters and the number must be separated by one space.</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><blockquote><p>1.1 2.5 1.7<br>1.2 3.1 1.6<br>4.1 1.2 1.1</p></blockquote><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><blockquote><p>T T W 39.31</p></blockquote><p><br></p><hr><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>简单题直接上代码</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">maxp</span><span class="params">(<span class="keyword">double</span> w, <span class="keyword">double</span> t, <span class="keyword">double</span> l)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(w &gt; t)&#123;</span><br><span class="line">        <span class="keyword">if</span>(l &gt; w)&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"L "</span>;</span><br><span class="line">            <span class="keyword">return</span> l;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"W "</span>;</span><br><span class="line">            <span class="keyword">return</span> w;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l &gt; t)&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"L "</span>;</span><br><span class="line">            <span class="keyword">return</span> l;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"T "</span>;</span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> profit = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">double</span> w[<span class="number">3</span>], t[<span class="number">3</span>], l[<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++)&#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; w[i] &gt;&gt; t[i] &gt;&gt; l[i];</span><br><span class="line">        profit *= maxp(w[i], t[i], l[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    profit = (profit * <span class="number">0.65</span> - <span class="number">1</span>) * <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.2f\n"</span>, profit);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Problem&quot;&gt;&lt;a href=&quot;#Problem&quot; class=&quot;headerlink&quot; title=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h2&gt;&lt;p&gt;With the 2010 FIFA World Cup running, football fan
      
    
    </summary>
    
      <category term="PAT" scheme="https://iris-cyy.github.io/categories/PAT/"/>
    
      <category term="Advanced" scheme="https://iris-cyy.github.io/categories/PAT/Advanced/"/>
    
    
      <category term="PAT" scheme="https://iris-cyy.github.io/tags/PAT/"/>
    
  </entry>
  
  <entry>
    <title>【DBS】Lecture 06. Relational Database Design</title>
    <link href="https://iris-cyy.github.io//Notes/Database-System/2020-02-11/dbs06/"/>
    <id>https://iris-cyy.github.io//Notes/Database-System/2020-02-11/dbs06/</id>
    <published>2020-02-11T09:17:19.000Z</published>
    <updated>2020-02-11T09:19:53.114Z</updated>
    
    <content type="html"><![CDATA[<p><img src="dbs06.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211171822167.png" width=80%></p><h2 id="First-Normal-Form"><a href="#First-Normal-Form" class="headerlink" title="First Normal Form"></a>First Normal Form</h2><p>atomic</p><h2 id="Functional-dependencies"><a href="#Functional-dependencies" class="headerlink" title="Functional dependencies"></a>Functional dependencies</h2><p>The functional dependency α → β holds on R if and only if for any legal relations r(R), whenever any two tuples t1 and t2 of r agree on the attributes α, they also agree on the attributes β, i.e., t1[α] = t2[α] ⟹ t1[α] = t2[β] </p><p>Trivial: α → β, if β ⊆ α         (平凡的函数依赖) </p><p>Non-trivial: α → β , if β ⊈ α    (非平凡的函数依赖) </p><h2 id="Closure"><a href="#Closure" class="headerlink" title="Closure"></a>Closure</h2><p>The set of all functional dependencies logically implied by F is the closure of F, denoted by F+ (函数依赖集F的闭包)</p><p>E.g., F = {A → B, B → C}, F+ = {A → B, B → C, A → C, A α A, AB → A, AB → B, AC → C, A → BC, …} </p><p>Armstrong’s Axioms provide inference rules to find F+. </p><p>We can find all of F+ by applying Armstrong’s Axioms: </p><p>If β ⊆ α, then α → β               (reflexivity, 自反律) — trivial </p><p>If α → β, then ?α → ?β (?α → β)    (augmentation, 增补律) </p><p>If α → β, and β → ?, then α → ?   (transitivity, 传递律) </p><p>If α → β and α → ? holds, then α → β? holds (union, 合并律) </p><p>If α → β? holds, then α → β and α → ? holds (decomposition, 分解律) </p><p>If α → β and β? → δ holds, then α? → δ holds (pseudotransitivity, 伪传递律) </p><h2 id="Canonical-cover（正则覆盖）"><a href="#Canonical-cover（正则覆盖）" class="headerlink" title="Canonical cover（正则覆盖）"></a>Canonical cover（正则覆盖）</h2><p>minimal set of functional dependencies in F</p><h2 id="Dependency-preservation（依赖保持）"><a href="#Dependency-preservation（依赖保持）" class="headerlink" title="Dependency preservation（依赖保持）"></a>Dependency preservation（依赖保持）</h2><h2 id="lossless-join-无损分解"><a href="#lossless-join-无损分解" class="headerlink" title="lossless-join 无损分解"></a>lossless-join 无损分解</h2><p>$R_1 \bigcap R_2 \rightarrow R_1 or R_1 \bigcap R_2 \rightarrow R_2$</p><h2 id="Boyce-Codd-Normal-Form"><a href="#Boyce-Codd-Normal-Form" class="headerlink" title="Boyce-Codd Normal Form"></a>Boyce-Codd Normal Form</h2><p><img src="/images/dbs/dbs06.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211171730017.png" alt="在这里插入图片描述"></p><h2 id="3NF"><a href="#3NF" class="headerlink" title="3NF"></a>3NF</h2><p><img src="/images/dbs/dbs06.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211171730061.png" alt="在这里插入图片描述"></p><p>If a relation is in BCNF, it is in 3NF.</p><p><br></p><hr><p>另外一些相关的博文：</p><p><a href="https://www.cnblogs.com/langdashu/p/5924082.html" target="_blank" rel="noopener">https://www.cnblogs.com/langdashu/p/5924082.html</a></p><p>BCNF 无损分解：<a href="https://blog.csdn.net/panxiqie___/article/details/38899021" target="_blank" rel="noopener">https://blog.csdn.net/panxiqie___/article/details/38899021</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;dbs06.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_
      
    
    </summary>
    
      <category term="Notes" scheme="https://iris-cyy.github.io/categories/Notes/"/>
    
      <category term="Database System" scheme="https://iris-cyy.github.io/categories/Notes/Database-System/"/>
    
    
      <category term="Notes" scheme="https://iris-cyy.github.io/tags/Notes/"/>
    
      <category term="DBS" scheme="https://iris-cyy.github.io/tags/DBS/"/>
    
  </entry>
  
  <entry>
    <title>【DBS】Lecture 09. Storage and File Structure</title>
    <link href="https://iris-cyy.github.io//Notes/Database-System/2020-02-11/dbs09/"/>
    <id>https://iris-cyy.github.io//Notes/Database-System/2020-02-11/dbs09/</id>
    <published>2020-02-11T09:13:49.000Z</published>
    <updated>2020-02-11T09:16:59.974Z</updated>
    
    <content type="html"><![CDATA[<p>存储器层次结构（向上变快变贵但是易失）</p><p><img src="/images/dbs/dbs09.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0lyaXNfY3l5,size_16,color_FFFFFF,t_70-20200211171459877.png" alt="img"></p><p><strong>基本存储</strong>(primary storage): 高速缓冲存储器(cache)、主存储器(main memory)</p><p><strong>辅助存储</strong>(secondary storage)或<strong>联机存储</strong>(online storage): 基本存储下一层，如磁盘(magnetic disk)</p><p><strong>三级存储</strong>(tertiary storage)或<strong>脱机存储</strong>(offline storage): 最底层，如磁带(magnetic tapes)或光盘(optical disk)</p><p>主存储器以上均为<strong>易失性存储</strong>(volatile storage)：设备断电后失去所有内容</p><p>独立磁盘冗余阵列(RAID)</p><p>平均故障时间(MTTF)</p><p>RAID level:</p><p><img src="/images/dbs/dbs09.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0lyaXNfY3l5,size_16,color_FFFFFF,t_70-20200211171600064.png" width=50%></p><h3 id="Choice-of-RAID-Level"><a href="#Choice-of-RAID-Level" class="headerlink" title="Choice of RAID Level"></a>Choice of RAID Level</h3><p>Factors in choosing RAID level </p><ul><li>Monetary cost </li><li>Performance: Number of I/O operations per second, and bandwidth during normal operation </li><li>Performance during failure </li><li>Performance during rebuild of failed disk <ul><li>Including time taken to rebuild failed disk </li></ul></li></ul><p>RAID 0 is used only when data safety is not important </p><ul><li>E.g., data can be recovered quickly from other sources</li></ul><p>Level 2 and 4 never used since they are subsumed by 3 and 5<br>Level 3 is not used anymore since bit-striping forces single block  reads to access all disks, wasting disk arm movement, which block striping (level 5) avoids<br>Level 6 is rarely used since levels 1 and 5 offer adequate safety for almost all applications<br><u>So competition is between 1 and 5 only</u></p><p>Level 1 provides much better write performance than level 5</p><ul><li>Level 5 requires at least 2 block reads and 2 block writes to write a single block, whereas Level 1 only requires 2 block writes</li><li>Level 1 preferred for high update environments such as log disks</li></ul><p>Level 1 had higher storage cost than level 5</p><ul><li>Disk drive capacities increasing rapidly (50%/year) whereas disk access times have decreased much less (x 3 in 10 years) </li><li>I/O requirements have increased greatly, e.g. for Web servers</li><li>When enough disks have been bought to satisfy required rate of I/O, they often have spare storage capacity<ul><li>So there is often no extra monetary cost for Level 1! </li></ul></li></ul><p>Level 5 is preferred for applications with low update rate, and large amounts of data.<br>Level 1 is preferred for all other applications. </p><h3 id="Buffer-Manager"><a href="#Buffer-Manager" class="headerlink" title="Buffer Manager"></a>Buffer Manager</h3><p>当Buffer的空闲区不够，不能容下新读入的Block时，需要将Buffer中 原有Block覆盖(替换)。主要策略为:</p><ul><li>LRU strategy (Least Recently Used, 最近最少使用策略): Replace the block which was least recently used.</li><li>MRU strategy (Most recently used, 最近最常用策略): System must pin the block currently being processed. After the final tuple of that block has been processed, the block is unpinned, and it becomes the most recently used block.（最优）</li><li>Toss-immediate，立即丢弃策略：处理完的元组立即丢弃</li></ul><h3 id="File-Organization"><a href="#File-Organization" class="headerlink" title="File Organization"></a>File Organization</h3><ul><li>定长记录</li><li>变长记录</li></ul><h3 id="Organization-of-Records-in-Files"><a href="#Organization-of-Records-in-Files" class="headerlink" title="Organization of Records in Files"></a>Organization of Records in Files</h3><ul><li>heap file 堆文件，流水文件：<br> a record can be placed anywhere in the file where there is space</li><li>sequential file 顺序文件：<br>store records in sequential order, based on the value of a search key of each record</li><li>hashing file 散列文件：<br>a hash function computed on some attribute of each record; the result specifies in which block of the file the record should be placed</li><li>clustering file organization 聚集文件组织：<br>records of several different relations can be stored in the same file<br>Motivation: store related records in different relations on the same block to minimize I/O</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;存储器层次结构（向上变快变贵但是易失）&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/dbs/dbs09.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ub
      
    
    </summary>
    
      <category term="Notes" scheme="https://iris-cyy.github.io/categories/Notes/"/>
    
      <category term="Database System" scheme="https://iris-cyy.github.io/categories/Notes/Database-System/"/>
    
    
      <category term="Notes" scheme="https://iris-cyy.github.io/tags/Notes/"/>
    
      <category term="DBS" scheme="https://iris-cyy.github.io/tags/DBS/"/>
    
  </entry>
  
  <entry>
    <title>【DBS】Lecture 10. Indexing and Hashing</title>
    <link href="https://iris-cyy.github.io//Notes/Database-System/2020-02-11/dbs10/"/>
    <id>https://iris-cyy.github.io//Notes/Database-System/2020-02-11/dbs10/</id>
    <published>2020-02-11T09:09:01.000Z</published>
    <updated>2020-02-11T09:13:10.851Z</updated>
    
    <content type="html"><![CDATA[<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><p><strong>顺序索引</strong>：基于值的顺序排序<br><strong>散列索引</strong>：基于将值平均分布到若干散列桶中</p><p><strong>聚集索引</strong>（clustering index）or <strong>主索引</strong>（primary index）：如果包含记录的文件按照某个搜索码指定的顺序排序，那么该搜索码对应的索引称为聚集索引。聚集索引的搜索码常常是主码，尽管并非必须如此。<br><strong>非聚集索引</strong>（nonclustering index）or <strong>辅助索引</strong>（secondary index）：搜索码指定的顺序与文件中记录的物理顺序不同的索引称为非聚集索引</p><p><strong>稠密索引</strong>（dense index）：在稠密索引中，文件中的每个搜索码值都有一个索引项。在稠密非聚集索引中，索引必须存储指向所有具有相同搜索码值的记录的指针列表。<br><strong>稀疏索引</strong>（sparse index）：在稀硫索引中，只为搜索码的某些值建立索引项，<u>只有索引是聚集索引时才能使用稀疏索引</u>。<br><br></br></p><h2 id="B-树"><a href="#B-树" class="headerlink" title="B+树"></a>B+树</h2><p>叶结点最多有 $n-1$ 个值，最少有 $\lceil (n-1)/2\rceil$ 个值</p><p>非叶节点最多可容纳 $n$ 个指针，最少必须有 $\lceil n/2\rceil$ 个指针</p><h3 id="insertion"><a href="#insertion" class="headerlink" title="insertion"></a>insertion</h3><p><img src="/image/dbs/dbs10.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0lyaXNfY3l5,size_16,color_FFFFFF,t_70.png" alt="在这里插入图片描述"></p><p>insert  “Adams”:<br><img src="/image/dbs/dbs10.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0lyaXNfY3l5,size_16,color_FFFFFF,t_70-20200211170911181.png" alt="在这里插入图片描述"></p><p>insert  “Lamport”:<br><img src="/image/dbs/dbs10.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0lyaXNfY3l5,size_16,color_FFFFFF,t_70-20200211170911232.png" alt="在这里插入图片描述"></p><h3 id="Deletion"><a href="#Deletion" class="headerlink" title="Deletion"></a>Deletion</h3><p><img src="/image/dbs/dbs10.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0lyaXNfY3l5,size_16,color_FFFFFF,t_70-20200211170911238.png" alt="在这里插入图片描述"></p><p>delete “Srinivasan”:<br><img src="/image/dbs/dbs10.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0lyaXNfY3l5,size_16,color_FFFFFF,t_70-20200211170911270.png" alt="在这里插入图片描述"></p><p>delete “Singh” and “Wu”:<br><img src="/image/dbs/dbs10.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0lyaXNfY3l5,size_16,color_FFFFFF,t_70-20200211170911259.png" alt="在这里插入图片描述"></p><p>delete “Gold”:<br><img src="/image/dbs/dbs10.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0lyaXNfY3l5,size_16,color_FFFFFF,t_70-20200211170911302.png" alt="在这里插入图片描述"></p><h2 id="B树"><a href="#B树" class="headerlink" title="B树"></a>B树</h2><p>Similar to B+tree, but B-tree allows search-key values to appear only once; eliminates redundant storage of search keys.</p><p><img src="/image/dbs/dbs10.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0lyaXNfY3l5,size_16,color_FFFFFF,t_70-20200211170911324.png" alt="在这里插入图片描述"></p><ul><li>Advantages of B-Tree indices:<br>➢ May use less tree nodes than a corresponding B+tree (because of duplicate).<br>➢ Sometimes possible to find search-key value before reaching leaf node.</li><li>Disadvantages of B-Tree indices:<br>➢ Only small fraction of all search-key values are found early<br>➢ Non-leaf nodes are larger, so fan-out is reduced. Thus B-Trees typically have greater depth than corresponding B+Tree<br>➢ Insertion and deletion more complicated than in B+Trees<br>➢ Implementation is harder than B+Trees.<br>因而许多数据库实现使用B+树</li></ul><h2 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h2><p>bucket overflow（桶溢出）处理：</p><ul><li>close addressing：增加溢出桶、溢出链，用来存储溢出部分</li><li>open addressing：溢出部分放到别的桶中（无溢出链）<br><br></li></ul><h2 id="Dynamic-Hashing-动态散列"><a href="#Dynamic-Hashing-动态散列" class="headerlink" title="Dynamic Hashing   动态散列"></a>Dynamic Hashing   动态散列</h2><p>extendable hashing 可扩充散列</p><p><a href="https://www.cnblogs.com/kegeyang/archive/2012/04/05/2432608.html" target="_blank" rel="noopener">https://www.cnblogs.com/kegeyang/archive/2012/04/05/2432608.html</a><br><br></p><h2 id="Index-Definition-in-SQL"><a href="#Index-Definition-in-SQL" class="headerlink" title="Index Definition in SQL"></a>Index Definition in SQL</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> &lt;<span class="keyword">index</span>-<span class="keyword">name</span>&gt; <span class="keyword">on</span> &lt;<span class="keyword">table</span>-<span class="keyword">name</span>&gt; (&lt;<span class="keyword">attribute</span>-<span class="keyword">list</span>&gt;)</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> <span class="keyword">index</span> uni-acnt-<span class="keyword">index</span> <span class="keyword">on</span> <span class="keyword">account</span>(<span class="keyword">account</span>- <span class="built_in">number</span>)</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">index</span> &lt;<span class="keyword">index</span>-<span class="keyword">name</span>&gt;</span><br></pre></td></tr></table></figure><p><br></p><h2 id="Bitmap-Indices"><a href="#Bitmap-Indices" class="headerlink" title="Bitmap Indices"></a>Bitmap Indices</h2><p><img src="/images/dbs/dbs10.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0lyaXNfY3l5,size_16,color_FFFFFF,t_70-20200211171147910.png" alt="img"></p><p><br></p><hr><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://blog.csdn.net/hellojoy/article/details/81740997" target="_blank" rel="noopener">https://blog.csdn.net/hellojoy/article/details/81740997</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;索引&quot;&gt;&lt;a href=&quot;#索引&quot; class=&quot;headerlink&quot; title=&quot;索引&quot;&gt;&lt;/a&gt;索引&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;顺序索引&lt;/strong&gt;：基于值的顺序排序&lt;br&gt;&lt;strong&gt;散列索引&lt;/strong&gt;：基于将值平均分布到若干散列桶
      
    
    </summary>
    
      <category term="Notes" scheme="https://iris-cyy.github.io/categories/Notes/"/>
    
      <category term="Database System" scheme="https://iris-cyy.github.io/categories/Notes/Database-System/"/>
    
    
      <category term="Notes" scheme="https://iris-cyy.github.io/tags/Notes/"/>
    
      <category term="DBS" scheme="https://iris-cyy.github.io/tags/DBS/"/>
    
  </entry>
  
  <entry>
    <title>【DBS】Lecture 11. Query Processing</title>
    <link href="https://iris-cyy.github.io//Notes/Database-System/2020-02-11/dbs11/"/>
    <id>https://iris-cyy.github.io//Notes/Database-System/2020-02-11/dbs11/</id>
    <published>2020-02-11T08:45:31.000Z</published>
    <updated>2020-02-11T09:08:37.681Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Meaturing-of-query-cost"><a href="#Meaturing-of-query-cost" class="headerlink" title="Meaturing of query cost"></a>Meaturing of query cost</h2><p>$t_T$ – time to transfer one block. (≈ 0.1ms)<br>$t_S$ – time for one seek. (≈ 4ms)<br>Cost for b block transfers plus S seeks :  $b<em> t_T + S</em> t_S$</p><p><img src="/images/dbs/dbs11.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211164548821.png" alt="11"></p><h2 id="External-merge-sort"><a href="#External-merge-sort" class="headerlink" title="External merge sort"></a>External merge sort</h2><p>cost:<br>M: 缓冲区能容纳的磁盘块数<br>$b_r$: 关系r中记录的磁盘块数<br>$b_b$: 每次从一个归并段读取的数据数<br>merge passes required: $\; \lceil log_{M-1}(b_r/M) \rceil$<br>total number of block transfer:  $\; b_r(2\lceil log_{M-1}(b_r/M) \rceil + 1)$<br>total number of seeks: $\; 2\lceil b_r/M \rceil + \lceil b_r / b_b \rceil (2 \lceil log_{M-1}(b_r/M) \rceil -1 )$<br><br></p><h2 id="Join"><a href="#Join" class="headerlink" title="Join"></a>Join</h2><p>元组数较少的关系作为外层关系时效果较好</p><h3 id="nested-loop-join-嵌套循环连接"><a href="#nested-loop-join-嵌套循环连接" class="headerlink" title="nested-loop join  嵌套循环连接"></a>nested-loop join  嵌套循环连接</h3><p>n: 元组数（记录数）， b: 磁盘块数</p><p>worst case: $\; n_r * b_s+b_r$ block transfer, plus $n_r +b_r$ disk seeks</p><p>best case: $\; b_r + b_s$ block transfer, plus 2 seeks</p><h3 id="block-nested-loop-join-块嵌套循环连接"><a href="#block-nested-loop-join-块嵌套循环连接" class="headerlink" title="block nested-loop join 块嵌套循环连接"></a>block nested-loop join 块嵌套循环连接</h3><p>worst case: $\; b_r <em> b_s+b_r$ block transfer, plus $2</em>b_r$ seeks</p><p>best case: $\; b_r + b_s$ block transfer, plus 2 seeks</p><p>improve: $\; \lceil b_r / (M-2) * b_s + b_r \rceil$ block transfer, plus $2\lceil b_r / (M-2 ) \rceil$ seeks</p><h3 id="indexed-nested-loop-join-索引嵌套循环连接"><a href="#indexed-nested-loop-join-索引嵌套循环连接" class="headerlink" title="indexed nested-loop join 索引嵌套循环连接"></a>indexed nested-loop join 索引嵌套循环连接</h3><p>c: 用连接条件对s进行单次选择操作的代价</p><p>cost of join: $\; b_r(t_T+t_S)+n_r*c$</p><h3 id="merge-join-排序归并连接"><a href="#merge-join-排序归并连接" class="headerlink" title="merge-join 排序归并连接"></a>merge-join 排序归并连接</h3><p>$b_r+b_s$ block transfers + $\lceil b_r/b_b \rceil + \lceil b_s / b_b \rceil$ seeks</p><h3 id="hash-join"><a href="#hash-join" class="headerlink" title="hash-join"></a>hash-join</h3><p>$M&gt;n_h +1$ 或 $M&gt;(b_s+M)+1$ 或 $M&gt;\sqrt {b_s}$ 时不需要递归划分</p><p>不需要递归划分时：$3(b_r + b_s) +4 * n_h$ block transfers + $2( \lceil b_r / b_b \rceil + \lceil b_s/b_b \rceil)$ seeks</p><p>需要递归划分时：$2(b_r + b_s) \lceil log_{M–1}(b_s) – 1 \rceil + b_r + b_s$ block transfers + $2(\lceil b_r / b_b \rceil + \lceil b_s / b_b \rceil ) \lceil log_{M–1}(b_s) – 1 \rceil$ seeks</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Meaturing-of-query-cost&quot;&gt;&lt;a href=&quot;#Meaturing-of-query-cost&quot; class=&quot;headerlink&quot; title=&quot;Meaturing of query cost&quot;&gt;&lt;/a&gt;Meaturing of quer
      
    
    </summary>
    
      <category term="Notes" scheme="https://iris-cyy.github.io/categories/Notes/"/>
    
      <category term="Database System" scheme="https://iris-cyy.github.io/categories/Notes/Database-System/"/>
    
    
      <category term="Notes" scheme="https://iris-cyy.github.io/tags/Notes/"/>
    
      <category term="DBS" scheme="https://iris-cyy.github.io/tags/DBS/"/>
    
  </entry>
  
  <entry>
    <title>【DBS】Lecture 03. SQL</title>
    <link href="https://iris-cyy.github.io//Notes/Database-System/2020-02-11/dbs03/"/>
    <id>https://iris-cyy.github.io//Notes/Database-System/2020-02-11/dbs03/</id>
    <published>2020-02-11T08:41:25.000Z</published>
    <updated>2020-02-11T08:45:16.737Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Data-Definition-Language"><a href="#Data-Definition-Language" class="headerlink" title="Data Definition Language"></a>Data Definition Language</h2><h3 id="Domain-Types-in-SQL"><a href="#Domain-Types-in-SQL" class="headerlink" title="Domain Types in SQL"></a>Domain Types in SQL</h3><ul><li><strong>char(n)</strong>: Fixed length character string, with user-specified length. </li><li><strong>varchar(n)</strong>: Variable length character strings, with user-specified maximum length n. </li><li><strong>int</strong>: Integer (a finite subset of the integers that is machine-dependent). </li><li><strong>smallint</strong>: Small integer (a machine-dependent subset of the integer domain type). </li><li><strong>numeric(p, d)</strong>: Fixed point number, with user-specified precision of p digits, with d digits to the right of decimal point. </li><li><p><strong>real, double precision</strong>: Floating point and double-precision floating point numbers, with machine-dependent precision. </p></li><li><p><strong>float(n)</strong>: Floating point number, with user-specified precision of at least <em>n</em> digits. </p></li><li><p>Null values are allowed in all the domain types. Declaring an attribute to be not null prohibits null values for that attribute. </p></li><li><p><strong>date</strong>: Dates, containing a (4 digits) year, month and date. </p><p>E.g., date ‘2007-2-27’  </p></li><li><p><strong>Time</strong>: Time of day, in hours, minutes and seconds. </p><p>E.g., time ‘11:18:16’, time ‘11:18:16.28’ </p></li><li><p><strong>timestamp</strong>: date plus time of day. </p><p>E.g., timestamp ‘2011-3-17 11:18:16.28’ </p></li></ul><h3 id="Creat-Table"><a href="#Creat-Table" class="headerlink" title="Creat Table"></a>Creat Table</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> r (A1 D1, A2 D2, ..., An Dn,</span><br><span class="line">              (integrity constraint1), </span><br><span class="line">              ..., </span><br><span class="line">              (integrity constraintk))</span><br></pre></td></tr></table></figure><ul><li><p>r  is the name of the relation </p></li><li><p>Each Ai  is an attribute name in the schema of relation r </p></li><li><p>Di  is the data type of values in the domain of attribute Ai </p></li></ul><h3 id="Drop-Table"><a href="#Drop-Table" class="headerlink" title="Drop Table"></a>Drop Table</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> r</span><br></pre></td></tr></table></figure><h3 id="Alter-Table（增减属性）"><a href="#Alter-Table（增减属性）" class="headerlink" title="Alter Table（增减属性）"></a>Alter Table（增减属性）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> r <span class="keyword">ADD</span> A D;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> r <span class="keyword">ADD</span> (A1D1,…,AnDn);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> r <span class="keyword">DROP</span> A</span><br></pre></td></tr></table></figure><h3 id="Creat-Index-or-Drop-Index（构建索引）"><a href="#Creat-Index-or-Drop-Index（构建索引）" class="headerlink" title="Creat Index or Drop Index（构建索引）"></a>Creat Index or Drop Index（构建索引）</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> &lt;i-<span class="keyword">name</span>&gt; <span class="keyword">ON</span> &lt;<span class="keyword">table</span>-<span class="keyword">name</span>&gt;(&lt;<span class="keyword">attribute</span>-<span class="keyword">list</span>&gt;)</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> <span class="keyword">INDEX</span> &lt;i-<span class="keyword">name</span>&gt; <span class="keyword">ON</span> &lt;<span class="keyword">table</span>-<span class="keyword">name</span>&gt;(&lt;<span class="keyword">attribute</span>-<span class="keyword">list</span>&gt;)</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> &lt;i-<span class="keyword">name</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="Select"><a href="#Select" class="headerlink" title="Select"></a>Select</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//allow duplicates</span><br><span class="line"><span class="keyword">SELECT</span> branch_name</span><br><span class="line"><span class="keyword">FROM</span> loan</span><br><span class="line"></span><br><span class="line">//<span class="keyword">no</span> duplicates</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">distinct</span> branch_name</span><br><span class="line"><span class="keyword">FROM</span> loan</span><br><span class="line"></span><br><span class="line">//<span class="keyword">allow</span> duplicates</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">all</span> branch_name</span><br><span class="line"><span class="keyword">FROM</span> loan</span><br><span class="line"></span><br><span class="line">//<span class="keyword">all</span> <span class="keyword">attributes</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> loan</span><br></pre></td></tr></table></figure><p>allow arithmetic expressions</p><h3 id="Where"><a href="#Where" class="headerlink" title="Where"></a>Where</h3><p>SELECT branch_name<br>FROM loan</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> branch_name</span><br><span class="line"><span class="keyword">FROM</span> loan</span><br><span class="line"><span class="keyword">WHERE</span> branch_name = <span class="string">"Perryridge"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> loan_name</span><br><span class="line"><span class="keyword">FROM</span> loan</span><br><span class="line"><span class="keyword">WHERE</span> amout <span class="keyword">BETWEEN</span> <span class="number">90000</span> <span class="keyword">AND</span> <span class="number">100000</span></span><br></pre></td></tr></table></figure><h3 id="From"><a href="#From" class="headerlink" title="From"></a>From</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//Cartesian product borrow x loan</span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> borrow,loan</span><br></pre></td></tr></table></figure><h3 id="String-Operations"><a href="#String-Operations" class="headerlink" title="String Operations"></a>String Operations</h3><ul><li><p>% — matches any substring (like * in the file system). </p></li><li><p>_ — matches any character (like ? in the file system). </p></li><li><p>Converting from upper to lower case (and vice versa) using Functions lower( ) and upper( )</p></li><li><p>Concatenation (using “||” )</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ‘客户名=’ || customer_name </span><br><span class="line"><span class="keyword">FROM</span> *customer* </span><br><span class="line"><span class="keyword">WHERE</span> …</span><br></pre></td></tr></table></figure></li></ul><h3 id="Ordering"><a href="#Ordering" class="headerlink" title="Ordering"></a>Ordering</h3><p>We may specify <strong>desc</strong> for descending order or <strong>asc</strong> for ascending order, and for each attribute, ascending order is the default. </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ORDER BY customer_name asc</span><br></pre></td></tr></table></figure><h3 id="Set-Operations"><a href="#Set-Operations" class="headerlink" title="Set Operations"></a>Set Operations</h3><p>UNION: ⋃</p><p>INTERSECT: ⋂</p><p>EXCEPT: -</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">SELECT</span> customer_name <span class="keyword">FROM</span> depositor)</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line">(<span class="keyword">SELECT</span> customer_name <span class="keyword">FROM</span> borrower) </span><br><span class="line"></span><br><span class="line">(<span class="keyword">SELECT</span> customer_name <span class="keyword">FROM</span> depositor) </span><br><span class="line"><span class="keyword">INTERSECT</span> </span><br><span class="line">(<span class="keyword">SELECT</span> customer_name <span class="keyword">FROM</span> borrower) </span><br><span class="line"></span><br><span class="line">(<span class="keyword">SELECT</span> customer_name <span class="keyword">FROM</span> depositor) </span><br><span class="line"><span class="keyword">EXCEPT</span></span><br><span class="line">(<span class="keyword">SELECT</span> customer_name <span class="keyword">FROM</span> borrower)</span><br></pre></td></tr></table></figure><h3 id="Aggregate-Functions"><a href="#Aggregate-Functions" class="headerlink" title="Aggregate Functions"></a>Aggregate Functions</h3><ul><li><p>avg(col): average value </p></li><li><p>min(col): minimum value </p></li><li><p>max(col): maximum value </p></li><li><p>sum(col): sum of values </p></li><li><p>count(col): number of values </p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">avg</span>(balance) avg_bal </span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">account</span> </span><br><span class="line"><span class="keyword">WHERE</span> branch_name = ‘Perryridge’</span><br></pre></td></tr></table></figure><p>Attributes in select clause outside of aggregate functions must appear in group by list. </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> branch_name, <span class="keyword">avg</span>(balance) avg_bal </span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">account</span> </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> brach_name</span><br></pre></td></tr></table></figure><h3 id="Null"><a href="#Null" class="headerlink" title="Null"></a>Null</h3><ul><li><p>The meaning is “missing information” or “inapplicable information”, i.e., unknown value or that a value does not exist. </p></li><li><p>The result of any arithmetic expression involving ‘null’ is null.   eg. 5 + null returns null. </p></li><li><p>Any comparison with null returns “unknown”   eg. 5 &lt; null or null &lt;&gt; null or null = null </p></li></ul><h3 id="View"><a href="#View" class="headerlink" title="View"></a>View</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> &lt;v_name&gt; <span class="keyword">AS</span> </span><br><span class="line"><span class="keyword">SELECT</span> c1, c2, … <span class="keyword">From</span> … </span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> &lt;v_name&gt; (c1, c2, …) <span class="keyword">AS</span> </span><br><span class="line"><span class="keyword">SELECT</span> e1, e2, … <span class="keyword">FROM</span> … </span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> &lt;V_NAME&gt;</span><br></pre></td></tr></table></figure><h3 id="With"><a href="#With" class="headerlink" title="With"></a>With</h3><p>allows views to be defined <strong>locally</strong> for a query<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> max_balance(<span class="keyword">value</span>) <span class="keyword">as</span> </span><br><span class="line">  <span class="keyword">SELECT</span> <span class="keyword">max</span>(balance)</span><br><span class="line">  <span class="keyword">FROM</span> <span class="keyword">account</span></span><br><span class="line"><span class="keyword">SELECT</span> account_number</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">account</span>, max_balance</span><br><span class="line"><span class="keyword">WHERE</span> account.balance = max_balance.value</span><br></pre></td></tr></table></figure></p><h3 id="Deletion"><a href="#Deletion" class="headerlink" title="Deletion"></a>Deletion</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> &lt;<span class="keyword">table</span>|<span class="keyword">view</span>&gt;</span><br><span class="line">[<span class="keyword">WHERE</span> &lt;condition&gt;&#125;</span><br></pre></td></tr></table></figure><h3 id="Insertion"><a href="#Insertion" class="headerlink" title="Insertion"></a>Insertion</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> &lt;<span class="keyword">table</span>|<span class="keyword">view</span>&gt;[(c1,c2,...)]</span><br><span class="line"><span class="keyword">VALUES</span>(e1,e2,...)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> &lt;<span class="keyword">table</span>|<span class="keyword">view</span>&gt;[(c1,c2,...)]</span><br><span class="line"><span class="keyword">SELECT</span> e1,e2,...</span><br><span class="line"><span class="keyword">FROM</span> ...</span><br></pre></td></tr></table></figure><h3 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">account</span></span><br><span class="line"><span class="keyword">SET</span> balance = <span class="keyword">case</span></span><br><span class="line">                <span class="keyword">when</span> balance &lt;= <span class="number">10000</span></span><br><span class="line">                <span class="keyword">then</span> balance*<span class="number">1.05</span></span><br><span class="line">                <span class="keyword">else</span> balance*<span class="number">1.06</span></span><br><span class="line">              <span class="keyword">end</span></span><br></pre></td></tr></table></figure><h3 id="Transactions"><a href="#Transactions" class="headerlink" title="Transactions"></a>Transactions</h3><ul><li>commit work: makes all updates of the transaction permanent in the database</li><li>rollback work: undoes all updates performed by the transaction<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">account</span> <span class="keyword">SET</span> balance = balance - <span class="number">100</span> <span class="keyword">WHERE</span></span><br><span class="line">account_number = <span class="string">'A-101'</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">account</span> <span class="keyword">SET</span> balance = balance + <span class="number">100</span> <span class="keyword">WHERE</span></span><br><span class="line">account_number = <span class="string">'A-201'</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="Joined-Relations"><a href="#Joined-Relations" class="headerlink" title="Joined Relations"></a>Joined Relations</h3><ul><li>Join types:<ul><li>inner join</li><li>left outer join</li><li>right outer join</li><li>full outer join</li></ul></li><li>Join Conditions<ul><li>natual</li><li>on <predicate></li><li>using (A1,A1,…,An)</li></ul></li></ul><p><img src="/images/dbs/dbs03.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211164138236.png" alt="jr"></p><p>Natural join: 以同名属性相等作为连接条件<br>Inner join：只输出匹配成功的元组<br>Outer join：还要考虑不能匹配的元组<br>非自然连接，容许不同名属性的比较，且结果关系中不消去重名属性。</p><p><br></p><hr><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.cnblogs.com/grandyang/p/5346963.html" target="_blank" rel="noopener">https://www.cnblogs.com/grandyang/p/5346963.html</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Data-Definition-Language&quot;&gt;&lt;a href=&quot;#Data-Definition-Language&quot; class=&quot;headerlink&quot; title=&quot;Data Definition Language&quot;&gt;&lt;/a&gt;Data Definitio
      
    
    </summary>
    
      <category term="Notes" scheme="https://iris-cyy.github.io/categories/Notes/"/>
    
      <category term="Database System" scheme="https://iris-cyy.github.io/categories/Notes/Database-System/"/>
    
    
      <category term="Notes" scheme="https://iris-cyy.github.io/tags/Notes/"/>
    
      <category term="DBS" scheme="https://iris-cyy.github.io/tags/DBS/"/>
    
  </entry>
  
  <entry>
    <title>【DBS】Lecture 04. Advanced SQL</title>
    <link href="https://iris-cyy.github.io//Notes/Database-System/2020-02-11/dbs04/"/>
    <id>https://iris-cyy.github.io//Notes/Database-System/2020-02-11/dbs04/</id>
    <published>2020-02-11T08:32:39.000Z</published>
    <updated>2020-02-11T08:39:21.673Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Integrity-Constraint"><a href="#Integrity-Constraint" class="headerlink" title="Integrity Constraint"></a>Integrity Constraint</h3><ul><li>not null (主码不可为空)</li><li>unique</li><li>check ( \<predicate> )</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">table</span> branch2(branch_name <span class="built_in">varchar</span>(<span class="number">30</span>) primary <span class="keyword">key</span>,</span><br><span class="line">                     branch_city <span class="built_in">varchar</span>(<span class="number">30</span>),</span><br><span class="line">                     assets <span class="built_in">integer</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">                     <span class="keyword">check</span> (assets &gt;= <span class="number">100</span>) );</span><br></pre></td></tr></table></figure><h3 id="Domain-Constraint"><a href="#Domain-Constraint" class="headerlink" title="Domain Constraint"></a>Domain Constraint</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">domain</span> hourly-wage <span class="built_in">numeric</span>(<span class="number">5</span>,<span class="number">2</span>);</span><br><span class="line">constraint value-test <span class="keyword">check</span> (<span class="keyword">value</span> &gt;= <span class="number">4.00</span>);</span><br></pre></td></tr></table></figure><h3 id="Referential-Integrity"><a href="#Referential-Integrity" class="headerlink" title="Referential Integrity"></a>Referential Integrity</h3><p>Account (<u>account-number</u>, branch-name, balance) — 参照关系 </p><p>Branch (<u>branch-name</u>, branch-city, assets) — 被参照关系 </p><p><img src="/images/dbs/dbs04.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211163658066.png" width=80%></p><p><strong>cascading action</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> <span class="keyword">table</span> course</span><br><span class="line">(...</span><br><span class="line"><span class="keyword">foreign</span> <span class="keyword">key</span> (dept_name) <span class="keyword">references</span> department</span><br><span class="line"><span class="keyword">on</span> <span class="keyword">delete</span> <span class="keyword">cascade</span></span><br><span class="line"><span class="keyword">on</span> <span class="keyword">update</span> <span class="keyword">cascade</span>,</span><br><span class="line">...);</span><br></pre></td></tr></table></figure><h3 id="Assertion"><a href="#Assertion" class="headerlink" title="Assertion"></a>Assertion</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">assertion</span> &lt;<span class="keyword">assertion</span>-<span class="keyword">name</span>&gt;</span><br><span class="line"><span class="keyword">CHECK</span> &lt;predicate&gt;;</span><br></pre></td></tr></table></figure><p>But SQL does not provide a construct for asserting: <u>for all X, P (X)</u></p><p>So it is achieved in a round -about fashion, using: <u>not exists X, such that not P (X)</u></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">assertion</span> credits_earned_constraint <span class="keyword">check</span></span><br><span class="line">  (<span class="keyword">not</span> <span class="keyword">exists</span>  (<span class="keyword">select</span> <span class="keyword">ID</span></span><br><span class="line">                <span class="keyword">from</span> student</span><br><span class="line">                <span class="keyword">where</span> tot_cred &lt;&gt; (<span class="keyword">select</span> <span class="keyword">sum</span> (credits) </span><br><span class="line">                                   <span class="keyword">from</span> takes <span class="keyword">natural</span> <span class="keyword">join</span> course </span><br><span class="line">                                   <span class="keyword">where</span> student. <span class="keyword">ID</span> = takes. <span class="keyword">ID</span></span><br><span class="line">                                   <span class="keyword">and</span> grade <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">and</span> grade &lt;&gt; <span class="string">'F'</span>)</span><br><span class="line">                )</span><br><span class="line">   );</span><br></pre></td></tr></table></figure><p><br></p><h3 id="Trigger"><a href="#Trigger" class="headerlink" title="Trigger"></a>Trigger</h3><p><img src="/images/dbs/dbs04.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211163247840.png" alt="trigger"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;CREATE/REPLACE&gt; trigger secure_ student before &lt;insert/delete/update&gt; on student</span><br><span class="line"><span class="keyword">Begin</span></span><br><span class="line"><span class="keyword">IF</span>(to_char(<span class="keyword">sysdate</span>, <span class="string">'DY'</span>) <span class="keyword">in</span>（<span class="string">'星期六'</span>，<span class="string">'星期日'</span>))</span><br><span class="line"><span class="keyword">OR</span>(to_char(<span class="keyword">sysdate</span>, <span class="string">'HH24'</span>) <span class="keyword">NOT</span> <span class="keyword">Between</span> <span class="number">8</span> <span class="keyword">and</span> <span class="number">17</span>) </span><br><span class="line"><span class="keyword">THEN</span> raise_ application_error(<span class="number">-20506</span>, <span class="string">'你只能在上班时间修改数据'</span>);</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">IF</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">trigger</span> &lt;trigger_name&gt;</span><br></pre></td></tr></table></figure><h3 id="Authorization"><a href="#Authorization" class="headerlink" title="Authorization"></a>Authorization</h3><ul><li>Security Specification</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> &lt;privilege <span class="keyword">list</span>&gt; <span class="keyword">on</span> &lt;<span class="keyword">table</span>/<span class="keyword">view</span>&gt;</span><br><span class="line"><span class="keyword">TO</span> &lt;<span class="keyword">user</span> <span class="keyword">list</span>&gt;</span><br></pre></td></tr></table></figure><p>  \<user list>: user-ids / public / a role</p><ul><li>Privilege</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">select</span>,<span class="keyword">insert</span> <span class="keyword">ON</span> branch <span class="keyword">TO</span> U1,U2,U3</span><br></pre></td></tr></table></figure><p>  select / insert / update / delete / references / all privileges / all</p><ul><li><p>Roles</p><p>permit common privileges for a class of users can be specified just once</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> <span class="keyword">role</span> teller; </span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">role</span> manager; </span><br><span class="line"><span class="keyword">Grant</span> <span class="keyword">select</span> <span class="keyword">on</span> branch <span class="keyword">to</span> teller; </span><br><span class="line"><span class="keyword">Grant</span> <span class="keyword">update</span> (balance) <span class="keyword">on</span> <span class="keyword">account</span> <span class="keyword">to</span> teller; </span><br><span class="line"><span class="keyword">Grant</span> <span class="keyword">all</span> <span class="keyword">privileges</span> <span class="keyword">on</span> <span class="keyword">account</span> <span class="keyword">to</span> manager; </span><br><span class="line"><span class="keyword">Grant</span> teller <span class="keyword">to</span> manager; </span><br><span class="line"><span class="keyword">Grant</span> teller <span class="keyword">to</span> alice, bob; </span><br><span class="line"><span class="keyword">Grant</span> manager <span class="keyword">to</span> avi;</span><br></pre></td></tr></table></figure><ul><li>Revoke</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> &lt;privilege <span class="keyword">list</span>&gt; <span class="keyword">ON</span> &lt;<span class="keyword">table</span>/<span class="keyword">view</span>&gt;</span><br><span class="line"><span class="keyword">FROM</span> &lt;<span class="keyword">user</span> <span class="keyword">list</span>&gt; [restrict/<span class="keyword">cascade</span>]</span><br></pre></td></tr></table></figure><p>  restrict：仅撤回用户本人</p><p>  cascade：连锁撤回，同时撤回用户对外的授权</p><h3 id="Audit-Trails"><a href="#Audit-Trails" class="headerlink" title="Audit Trails"></a>Audit Trails</h3><p>log all changes to the database</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AUDIT &lt;st-opt&gt;[BY &lt;users&gt;][BY session/access][whenever successful / whenever not seccessful]</span><br></pre></td></tr></table></figure><p>\<st-opt>:  table, view, role, index</p><p>NOAUDIT… 取消审计</p><p>by\<users>缺省时对所有用户审计</p><p>by session：每次会话期间，相同类型需审计的SQL语句仅记录一次</p><ul><li>Audit in oracle:</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AUDIT &lt;obj-opt&gt; ON &lt;obj&gt;/DEFAULT [by session / by access][whenever successful / whenever not successful]</span><br></pre></td></tr></table></figure><p>  实体审计对所有用户起作用</p><p>  ON \<obj> 指出审计对象表、视图名。 </p><p>  ON DEFAULT 对其后创建的所有对象起作用。 </p><p>  取消审计：NOAUDIT … </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Integrity-Constraint&quot;&gt;&lt;a href=&quot;#Integrity-Constraint&quot; class=&quot;headerlink&quot; title=&quot;Integrity Constraint&quot;&gt;&lt;/a&gt;Integrity Constraint&lt;/h3&gt;&lt;
      
    
    </summary>
    
      <category term="Notes" scheme="https://iris-cyy.github.io/categories/Notes/"/>
    
      <category term="Database System" scheme="https://iris-cyy.github.io/categories/Notes/Database-System/"/>
    
    
      <category term="Notes" scheme="https://iris-cyy.github.io/tags/Notes/"/>
    
      <category term="DBS" scheme="https://iris-cyy.github.io/tags/DBS/"/>
    
  </entry>
  
  <entry>
    <title>【DBS】Lecture 05. E-R Model</title>
    <link href="https://iris-cyy.github.io//Notes/Database-System/2020-02-11/dbs05/"/>
    <id>https://iris-cyy.github.io//Notes/Database-System/2020-02-11/dbs05/</id>
    <published>2020-02-11T08:17:10.000Z</published>
    <updated>2020-02-11T08:31:26.505Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Keys"><a href="#Keys" class="headerlink" title="Keys"></a>Keys</h2><p><img src="/images/dbs/dbs05.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70.png" alt="keys"></p><h2 id="E-R-Diagram"><a href="#E-R-Diagram" class="headerlink" title="E-R Diagram"></a>E-R Diagram</h2><ul><li>Rectangles represent entity sets. </li><li>Diamonds represent relationship sets. </li><li>Lines link attributes to entity sets and entity sets to relationship sets. </li><li>Ellipses represent attributes. <ul><li>Double ellipses represent multivalued attributes. </li><li>Dashed ellipses denote derived attributes. </li></ul></li><li>Underline indicates primary key attributes.</li></ul><p><img src="/images/dbs/dbs05.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211161722463.png" alt="er"></p><p><img src="/images/dbs/dbs05.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211161722236.png" alt="er2"></p><ul><li><p>We express cardinality constraints by drawing either a directed line (→), signifying “one”, or an undirected line (—), signifying “many”,  between the relationship set and the entity set. </p><p><img src="/images/dbs/dbs05.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211161722257.png" alt="er3"></p></li><li><p>Total participation (全参与) (indicated by double line): every entity in the entity set participates in at least one relationship in the relationship set.<br>E.g., participation of loan in borrower is total.<br>Every loan must have a customer associated to it via borrower. </p></li><li><p>Partial participation (部分参与): some entities may not participate in any relationship in the relationship set.<br><img src="/images/dbs/dbs05.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211161722427.png" alt="er4"></p></li><li><p>An entity set that does not have a primary key is referred to as a weak entity set<br>The discriminator or partial key (分辨符或部分码) of a weak entity set is the set of attributes that distinguishes among all those entities in a weak entity set that depend on one particular strong entity </p><p><img src="/images/dbs/dbs05.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211161722430.png" alt="er5"><br><img src="/images/dbs/dbs05.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211161722331.png" alt="er6"><br><img src="/images/dbs/dbs05.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211161722357.png" alt="er7"></p><p><img src="/images/dbs/dbs05.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211161722421.png" alt="er8"></p><p><img src="/images/dbs/dbs05.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211161722456.png" alt="er9"></p><p><img src="/images/dbs/dbs05.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211161722459.png" alt="er10"></p><p><img src="/images/dbs/dbs05.assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9pcmlzc3N5LmJsb2cuY3Nkbi5uZXQ=,size_16,color_FFFFFF,t_70-20200211161722547.png" alt="er11"></p></li><li><p>若一个对象只对其名字及单值感兴趣，则可作为属性，如性别；若一个对象除名字外，本身还有其他属性需描述，则该对象应定义为实体集。如电话, 部门. </p></li><li><p>一个对象不能同时作为实体和属性. </p></li><li><p>一个实体集不能与另一实体集的属性相关联，只能实体与实体相联系</p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Keys&quot;&gt;&lt;a href=&quot;#Keys&quot; class=&quot;headerlink&quot; title=&quot;Keys&quot;&gt;&lt;/a&gt;Keys&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/images/dbs/dbs05.assets/watermark,type_ZmFuZ3poZW5n
      
    
    </summary>
    
      <category term="Notes" scheme="https://iris-cyy.github.io/categories/Notes/"/>
    
      <category term="Database System" scheme="https://iris-cyy.github.io/categories/Notes/Database-System/"/>
    
    
      <category term="Notes" scheme="https://iris-cyy.github.io/tags/Notes/"/>
    
      <category term="DBS" scheme="https://iris-cyy.github.io/tags/DBS/"/>
    
  </entry>
  
  <entry>
    <title>【PAT-Advanced】1010 Radix</title>
    <link href="https://iris-cyy.github.io//PAT/Advanced/2020-02-08/pat_1010/"/>
    <id>https://iris-cyy.github.io//PAT/Advanced/2020-02-08/pat_1010/</id>
    <published>2020-02-08T03:22:27.000Z</published>
    <updated>2020-02-08T15:48:06.274Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Given a pair of positive integers, for example, 6 and 110, can this equation 6 = 110 be true? The answer is <code>yes</code>, if 6 is a decimal number and 110 is a binary number.</p><p>Now for any pair of positive integers $N_1$ and $N_2$, your task is to find the radix of one number while that of the other is given.</p><h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains one test case. Each case occupies a line which contains 4 positive integers:</p><blockquote><p>$N_1$ $N_2$ tag radix</p></blockquote><p>Here <code>N1</code> and <code>N2</code> each has no more than 10 digits. A digit is less than its radix and is chosen from the set { 0-9, <code>a</code>-<code>z</code> } where 0-9 represent the decimal numbers 0-9, and <code>a</code>-<code>z</code> represent the decimal numbers 10-35. The last number <code>radix</code> is the radix of <code>N1</code> if <code>tag</code> is 1, or of <code>N2</code> if <code>tag</code> is 2.</p><h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>For each test case, print in one line the radix of the other number so that the equation <code>N1</code> = <code>N2</code> is true. If the equation is impossible, print <code>Impossible</code>. If the solution is not unique, output the smallest possible radix.</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input 1:"></a>Sample Input 1:</h3><blockquote><p>6 110 1 10</p></blockquote><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output 1:"></a>Sample Output 1:</h3><blockquote><p>2</p></blockquote><h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input 2:"></a>Sample Input 2:</h3><blockquote><p>1 ab 1 2</p></blockquote><h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output 2:"></a>Sample Output 2:</h3><blockquote><p>Impossible</p></blockquote><p><br></p><hr><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>这题的意思和解题思路不太难，但是巨坑，过了很多次才过去。</p><p>题目意思大概就是进制转换，需要注意的有以下几个点</p><ul><li><p>radix和N可能会很大，要用<code>long long</code>而不是<code>int</code></p></li><li><p>可能会出现多种可能进制的情况，这种情况下输出最小的radix。例如<code>8 8 1 10</code>这组输入，可以是9以上任何进制，这时输出9。要注意的是，只有输入的未知进制的数是一位数的时候可能会出现这种情况，因此只要在输入是一位数的时候考虑出现多种可能进制。</p></li><li><p>还是上面那个例子，<code>8 8 1 10</code>的输入，输出是9，因为最大位数是8，只有在9以上的进制会出现8这个数字。这意味着要做一个判定，根据出现的数字或字符找到可能的最小进制。</p></li><li><p>最简单的方式是在范围内线性遍历找到对应的radix，做法如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(radix2 = minR(N2); ; radix2++)&#123;</span><br><span class="line">        dec2 = toDec(N2, radix2);</span><br><span class="line">        <span class="keyword">if</span>(dec1 == dec2)&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; radix2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(dec2 &gt; dec1 || radix2 &gt; dec1)&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"Impossible"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>其中<code>minR</code>用于做上一个注意点的判定，<code>toDec</code>用于把不同进制的数转为十进制，<code>dec1</code>是已知进制的数的十进制值。</p><p>这样做会有一个测试点过不去，显示<code>运行超时</code>。问题在于线性遍历太慢，可以用二分遍历降低复杂度。在改为二分遍历之后能够过这个点。</p></li><li><p>在判断的时候要注意溢出问题，如果溢出则要减小二分范围的上界。</p></li></ul><p>实现代码如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> N1, N2;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> tag, radix, radix2 = <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> dec1, dec2;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将字符转换为对应的数字</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">toNum</span><span class="params">(<span class="keyword">char</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(c &lt;= <span class="string">'9'</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> c - <span class="string">'0'</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> c - <span class="string">'a'</span> + <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//求十进制值</span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">toDec</span><span class="params">(<span class="built_in">string</span> num, <span class="keyword">long</span> <span class="keyword">long</span> radix)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> dec = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;num.length(); i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> next = toNum(num[i]);</span><br><span class="line">        dec = dec * radix + next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dec;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//找到当前数字可能的最小进制，例如12abf最小只能是十六进制</span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">minR</span><span class="params">(<span class="built_in">string</span> num)</span></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ret;</span><br><span class="line">    <span class="keyword">char</span> maxc = <span class="string">'0'</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;num.length(); i++)&#123;</span><br><span class="line">        maxc = <span class="built_in">max</span>(maxc, num[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    ret = toNum(maxc) + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(ret &lt; <span class="number">2</span>)&#123;</span><br><span class="line">        ret = <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; N1 &gt;&gt; N2 &gt;&gt; tag &gt;&gt; radix;</span><br><span class="line">    <span class="comment">//让已知进制的数作为N1</span></span><br><span class="line">    <span class="keyword">if</span>(tag == <span class="number">2</span>)&#123;</span><br><span class="line">        <span class="built_in">string</span> temp = N1;</span><br><span class="line">        N1 = N2;</span><br><span class="line">        N2 = temp;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    dec1 = toDec(N1, radix);</span><br><span class="line">    <span class="comment">//二分遍历</span></span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> rmin = minR(N2);</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> rmax = dec1;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> r;</span><br><span class="line">    <span class="keyword">int</span> first = toNum(N2[<span class="number">0</span>]);</span><br><span class="line">    <span class="comment">//如果只有一位数，且符合，即可能有多种进制情况，输出最小</span></span><br><span class="line">    <span class="keyword">if</span>(N2.length() == <span class="number">1</span> &amp;&amp; dec1 == first)&#123;</span><br><span class="line">        radix2 = rmin;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(rmin &lt;= rmax)&#123;</span><br><span class="line">            r = (rmin + rmax) / <span class="number">2</span>;</span><br><span class="line">            dec2 = toDec(N2, r);</span><br><span class="line">            <span class="comment">//如果溢出，缩小上界</span></span><br><span class="line">            <span class="keyword">if</span>(dec2 &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                rmax = r - <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(dec2 == dec1)&#123;</span><br><span class="line">                radix2 = r;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(dec2 &gt; dec1)&#123;</span><br><span class="line">                rmax = r - <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (dec2 &lt; dec1)&#123;</span><br><span class="line">                rmin = r + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(radix2 == <span class="number">-1</span>)&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Impossible"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; radix2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Problem&quot;&gt;&lt;a href=&quot;#Problem&quot; class=&quot;headerlink&quot; title=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h2&gt;&lt;p&gt;Given a pair of positive integers, for example, 6 
      
    
    </summary>
    
      <category term="PAT" scheme="https://iris-cyy.github.io/categories/PAT/"/>
    
      <category term="Advanced" scheme="https://iris-cyy.github.io/categories/PAT/Advanced/"/>
    
    
      <category term="PAT" scheme="https://iris-cyy.github.io/tags/PAT/"/>
    
  </entry>
  
  <entry>
    <title>【PAT-Advanced】1009 Product of Polynomials</title>
    <link href="https://iris-cyy.github.io//PAT/Advanced/2020-02-07/pat_1009/"/>
    <id>https://iris-cyy.github.io//PAT/Advanced/2020-02-07/pat_1009/</id>
    <published>2020-02-07T05:36:19.000Z</published>
    <updated>2020-02-08T15:49:24.242Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>This time, you are supposed to find $A×B$ where $A$ and $B$ are two polynomials.</p><h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains one test case. Each case occupies 2 lines, and each line contains the information of a polynomial:</p><blockquote><p>$K \; N_1 \; a_{N_1} \; N_2 \; a_{N_2} … N_K \; a_{N_K}$</p></blockquote><p>where $K$ is the number of nonzero terms in the polynomial, $N_i$ and $a_{N_i} (i=1,2,⋯,K)$ are the exponents and coefficients, respectively. It is given that $1≤K≤10$, $0≤N_K&lt;⋯&lt;N_2&lt;N_1≤1000$. </p><h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>For each test case you should output the product of $A$ and $B$ in one line, with the same format as the input. Notice that there must be <strong>NO</strong> extra space at the end of each line. Please be accurate up to 1 decimal place. </p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><blockquote><p>2 1 2.4 0 3.2<br>2 2 1.5 1 0.5</p></blockquote><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><blockquote><p>3 3 3.6 2 6.0 1 1.6</p></blockquote><p><br></p><hr><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>Advanced-1002的升华版，要注意的是数组的上界，两个多项式的最高次分别可以是1000，则数组上界要开到2000。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 2005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXK 15</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> poly[MAXN];</span><br><span class="line"><span class="keyword">int</span> K1, K2;</span><br><span class="line"><span class="keyword">int</span> expo[MAXK], expo2;</span><br><span class="line"><span class="keyword">double</span> coe[MAXK], coe2;</span><br><span class="line"><span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> first = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;MAXN; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;MAXK)&#123;</span><br><span class="line">            expo[i] = <span class="number">0</span>;</span><br><span class="line">            coe[i] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        poly[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    init();</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; K1;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;K1; i++)&#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; expo[i] &gt;&gt; coe[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; K2;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;K2; i++)&#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; expo2 &gt;&gt; coe2;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;K1; j++)&#123;</span><br><span class="line">            poly[expo2+expo[j]] += coe2 * coe[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=MAXN<span class="number">-1</span>; i&gt;=<span class="number">0</span>; i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(poly[i] != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(first == <span class="number">-1</span>)&#123;</span><br><span class="line">                first = i;</span><br><span class="line">            &#125;</span><br><span class="line">            cnt ++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; cnt;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=first; i&gt;=<span class="number">0</span>; i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(poly[i] != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; i &lt;&lt; <span class="string">" "</span> &lt;&lt; setiosflags(ios::fixed) &lt;&lt; setprecision(<span class="number">1</span>) &lt;&lt; poly[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Problem&quot;&gt;&lt;a href=&quot;#Problem&quot; class=&quot;headerlink&quot; title=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h2&gt;&lt;p&gt;This time, you are supposed to find $A×B$ where $A
      
    
    </summary>
    
      <category term="PAT" scheme="https://iris-cyy.github.io/categories/PAT/"/>
    
      <category term="Advanced" scheme="https://iris-cyy.github.io/categories/PAT/Advanced/"/>
    
    
      <category term="PAT" scheme="https://iris-cyy.github.io/tags/PAT/"/>
    
  </entry>
  
  <entry>
    <title>【PAT-Advanced】1008 Elevator</title>
    <link href="https://iris-cyy.github.io//PAT/Advanced/2020-02-07/pat_1008/"/>
    <id>https://iris-cyy.github.io//PAT/Advanced/2020-02-07/pat_1008/</id>
    <published>2020-02-07T05:06:38.000Z</published>
    <updated>2020-02-07T05:08:44.737Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>The highest building in our city has only one elevator. A request list is made up with <em>N</em> positive numbers. The numbers denote at which floors the elevator will stop, in specified order. It costs 6 seconds to move the elevator up one floor, and 4 seconds to move down one floor. The elevator will stay for 5 seconds at each stop.</p><p>For a given request list, you are to compute the total time spent to fulfill the requests on the list. The elevator is on the 0th floor at the beginning and does not have to return to the ground floor when the requests are fulfilled.</p><h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains one test case. Each case contains a positive integer <em>N</em>, followed by <em>N</em> positive numbers. All the numbers in the input are less than 100.</p><h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>For each test case, print the total time on a single line. </p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><blockquote><p>3 2 3 1</p></blockquote><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><blockquote><p>41</p></blockquote><p><br></p><hr><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>简单题直接上代码</p><p>注意点：</p><ul><li>从0出发</li><li>最后一站也要算停留的5s时间</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N;</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">stop</span>, lastStop;</span><br><span class="line">    <span class="keyword">int</span> time = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; N;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; <span class="built_in">stop</span>;</span><br><span class="line">    time += <span class="number">6</span> * <span class="built_in">stop</span> + <span class="number">5</span>;</span><br><span class="line">    lastStop = <span class="built_in">stop</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;N; i++)&#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; <span class="built_in">stop</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">stop</span> &gt; lastStop)&#123;</span><br><span class="line">            time += <span class="number">6</span> * (<span class="built_in">stop</span> - lastStop) + <span class="number">5</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            time += <span class="number">4</span> * (lastStop - <span class="built_in">stop</span>) + <span class="number">5</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        lastStop = <span class="built_in">stop</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; time &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Problem&quot;&gt;&lt;a href=&quot;#Problem&quot; class=&quot;headerlink&quot; title=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h2&gt;&lt;p&gt;The highest building in our city has only one elev
      
    
    </summary>
    
      <category term="PAT" scheme="https://iris-cyy.github.io/categories/PAT/"/>
    
      <category term="Advanced" scheme="https://iris-cyy.github.io/categories/PAT/Advanced/"/>
    
    
      <category term="PAT" scheme="https://iris-cyy.github.io/tags/PAT/"/>
    
  </entry>
  
  <entry>
    <title>【PAT-Advanced】1007 Maximum Subsequence Sum</title>
    <link href="https://iris-cyy.github.io//PAT/Advanced/2020-02-05/pat_1007/"/>
    <id>https://iris-cyy.github.io//PAT/Advanced/2020-02-05/pat_1007/</id>
    <published>2020-02-05T06:18:52.000Z</published>
    <updated>2020-02-05T09:03:32.676Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Given a sequence of $K$ integers ${ N_1, N_2, …, N_K }$. A continuous subsequence is defined to be ${ N_i, N_{i+1}, …, N_j }$ where $1≤i≤j≤K$. The Maximum Subsequence is the continuous subsequence which has the largest sum of its elements. For example, given sequence { -2, 11, -4, 13, -5, -2 }, its maximum subsequence is { 11, -4, 13 } with the largest sum being 20.</p><p>Now you are supposed to find the largest sum, together with the first and the last numbers of the maximum subsequence. </p><h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains one test case. Each case occupies two lines. The first line contains a positive integer $K (≤10000)$. The second line contains $K$ numbers, separated by a space. </p><h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>For each test case, output in one line the largest sum, together with the first and the last numbers of the maximum subsequence. The numbers must be separated by one space, but there must be no extra space at the end of a line. In case that the maximum subsequence is not unique, output the one with the smallest indices $i​$ and $j​$ (as shown by the sample case). If all the $K​$ numbers are negative, then its maximum sum is defined to be 0, and you are supposed to output the first and the last numbers of the whole sequence. </p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><blockquote><p>10<br>-10 1 2 3 4 -5 -23 3 7 -21</p></blockquote><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><blockquote><p>10 1 4</p></blockquote><p><br></p><hr><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>这题怪坑的，过了好多次才完全过去。</p><p>题目是很经典的题目，最大子序列和，没记错的话是《数据结构与算法分析》第二章讨论了很久的一个问题。</p><p>稍稍整理一下几个经典的算法</p><h3 id="算法一：疯狂穷举"><a href="#算法一：疯狂穷举" class="headerlink" title="算法一：疯狂穷举"></a>算法一：疯狂穷举</h3><p>最差但也是最简单最不需要动脑子的算法，先穷举子序列起点，再穷举子序列终点，然后求和。</p><p>复杂度是$N^3$</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MaxSubsequenceSum</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> A[], <span class="keyword">int</span> N)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> ThisSum, MaxSum;</span><br><span class="line">  MaxSum = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">//穷举A[i]</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;N; i++)&#123;</span><br><span class="line">    <span class="comment">//穷举A[j]</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=i; j&lt;N; j++)&#123;</span><br><span class="line">      ThisSum = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> k=i; k&lt;=j; k++)&#123;</span><br><span class="line">        <span class="comment">//A[i] + ... + A[j]</span></span><br><span class="line">        ThisSum += A[k];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(ThisSum &gt; MaxSum)&#123;</span><br><span class="line">      MaxSum = ThisSum;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> MaxSum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="算法二：算法一的优化"><a href="#算法二：算法一的优化" class="headerlink" title="算法二：算法一的优化"></a>算法二：算法一的优化</h3><p>类似算法一，先穷举起点再穷举终点，但在求和的部分对算法一进行优化。</p><p>复杂度是$N^2$</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MaxSubsequenceSum</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> A[], <span class="keyword">int</span> N)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> ThisSum, MaxSum;</span><br><span class="line">  MaxSum = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">//穷举A[i]</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;N; i++)&#123;</span><br><span class="line">    ThisSum = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//穷举A[j]</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=i; j&lt;N; j++)&#123;</span><br><span class="line">        ThisSum += A[j];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(ThisSum &gt; MaxSum)&#123;</span><br><span class="line">      MaxSum = ThisSum;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> MaxSum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="算法三：分治"><a href="#算法三：分治" class="headerlink" title="算法三：分治"></a>算法三：分治</h3><p>用递归进行分治，把整个序列分成左右两半，整个序列的最大子序列和可能有三种情况，一种是左半个序列的最大子序列和，一种是右半个序列的最大子序列和，另一种是横跨中间分界线。分别计算这三种的最大和，再取其中最大值即可。前两种直接递归可以算出来，第三种，在左半个中求包含右边界的最大和，在右半个中求包含左边界的最大和，两者相加即可。</p><p>复杂度是$NlogN$</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">MaxSubSum</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> A[], <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> MaxLeftSum, MaxRightSum;</span><br><span class="line">  <span class="keyword">int</span> MaxLeftBorderSum, MaxRightBorderSum;</span><br><span class="line">  <span class="keyword">int</span> LeftBorderSum, RightBorderSum;</span><br><span class="line">  <span class="keyword">int</span> center;</span><br><span class="line">  <span class="keyword">if</span>(left == right)&#123;</span><br><span class="line">    <span class="keyword">if</span>(A[left] &gt; <span class="number">0</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> A[left];</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  center = (left + right) / <span class="number">2</span>;</span><br><span class="line">  <span class="comment">//递归求左右两半的最大子序列和</span></span><br><span class="line">  MaxLeftSum = MaxSubSum(A, left, center);</span><br><span class="line">  MaxRightSum = MaxSubSum(A, center+<span class="number">1</span>, right);</span><br><span class="line">  <span class="comment">//求左半部分中包含右边界的最大和</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=center; i&gt;=left; i--)&#123;</span><br><span class="line">    LeftBorderSum += A[i];</span><br><span class="line">    <span class="keyword">if</span>(LeftBorderSum &gt; MaxLeftBorderSum)&#123;</span><br><span class="line">      MaxLeftBorderSum = LeftBorderSum;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//求右半部分中包含左边界的最大和</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=center+<span class="number">1</span>; i&lt;=right; i++)&#123;</span><br><span class="line">    LeftBorderSum += A[i];</span><br><span class="line">    <span class="keyword">if</span>(RightBorderSum &gt; MaxRightBorderSum)&#123;</span><br><span class="line">      MaxRightBorderSum = RightBorderSum;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">max</span>(MaxLeftBorderSum+MaxRightBorderSum, MaxLeftSum, MaxRightSum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MaxSubsequenceSum</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> A[], <span class="keyword">int</span> N)</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> MaxSubSum(A, <span class="number">0</span>, N<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="算法四：动态规划"><a href="#算法四：动态规划" class="headerlink" title="算法四：动态规划"></a>算法四：动态规划</h3><p>一个比较取巧的优秀算法，当遇到一部分和小于零就舍弃，这样就只要进行一次遍历。</p><p>后来才发现这有点动态规划的意思，如果用<code>dp[i]</code>存以<code>A[i]</code>结尾的子序列的最大和，则<code>dp[i+1] = max(dp[i]+A[i+1], A[i+1])</code>，简化完大概就是如果<code>dp[i]&lt;0</code>就不要了酱紫。具体看代码。</p><p>复杂度是$N$</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MaxSubsequenceSum</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> A[], <span class="keyword">int</span> N)</span></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> thisSum, maxSum;</span><br><span class="line">  thisSum = maxSum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;N; j++)&#123;</span><br><span class="line">    thisSum += A[j];</span><br><span class="line">    <span class="keyword">if</span>(thisSum &gt; maxSum)&#123;</span><br><span class="line">      maxSum = thisSum;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(thisSum &lt; <span class="number">0</span>)&#123;</span><br><span class="line">      thisSum = <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> maxSum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br></p><hr><p>然后说一下遇到的坑</p><ul><li>手动划重点：If all the $K$ numbers are negative, then its maximum sum is defined to be 0, and you are supposed to output the first and the last numbers of the whole sequence. </li><li>如果是0+全负，类似于<code>-1 0 -3 -2</code>这样，要输出<code>0 0 0</code></li><li>可以参考一下前人<a href="https://blog.csdn.net/weixin_38097576/article/details/82715413" target="_blank" rel="noopener">避雷经验</a></li></ul><p>下面贴代码</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 10005</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> K;</span><br><span class="line"><span class="keyword">int</span> num[MAXN];</span><br><span class="line"><span class="keyword">int</span> maxsum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> first, last;</span><br><span class="line"><span class="keyword">int</span> tempf, templ;</span><br><span class="line"><span class="keyword">bool</span> zero = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; K;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;K; i++)&#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; num[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(K == <span class="number">0</span>)&#123;</span><br><span class="line">        maxsum = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;K; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(num[i] == <span class="number">0</span>)&#123;</span><br><span class="line">            zero = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        sum += num[i];</span><br><span class="line">        <span class="keyword">if</span>(sum &gt; maxsum)&#123;</span><br><span class="line">            maxsum = sum;</span><br><span class="line">            first = tempf;</span><br><span class="line">            templ = last = i;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (sum &lt; <span class="number">0</span>)&#123;</span><br><span class="line">            sum = <span class="number">0</span>;</span><br><span class="line">            tempf = templ = i+<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            templ = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(maxsum &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(zero)&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"0 0 0"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; num[<span class="number">0</span>] &lt;&lt; <span class="string">" "</span> &lt;&lt; num[K<span class="number">-1</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; maxsum &lt;&lt; <span class="string">" "</span> &lt;&lt; num[first] &lt;&lt; <span class="string">" "</span> &lt;&lt; num[last] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Problem&quot;&gt;&lt;a href=&quot;#Problem&quot; class=&quot;headerlink&quot; title=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h2&gt;&lt;p&gt;Given a sequence of $K$ integers ${ N_1, N_2, …, N
      
    
    </summary>
    
      <category term="PAT" scheme="https://iris-cyy.github.io/categories/PAT/"/>
    
      <category term="Advanced" scheme="https://iris-cyy.github.io/categories/PAT/Advanced/"/>
    
    
      <category term="PAT" scheme="https://iris-cyy.github.io/tags/PAT/"/>
    
  </entry>
  
  <entry>
    <title>【PAT-Advanced】1006 Sign In and Sign Out</title>
    <link href="https://iris-cyy.github.io//PAT/Advanced/2020-02-05/pat_1006/"/>
    <id>https://iris-cyy.github.io//PAT/Advanced/2020-02-05/pat_1006/</id>
    <published>2020-02-05T02:35:48.000Z</published>
    <updated>2020-02-05T09:03:42.824Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>At the beginning of every day, the first person who signs in the computer room will unlock the door, and the last one who signs out will lock the door. Given the records of signing in’s and out’s, you are supposed to find the ones who have unlocked and locked the door on that day.</p><h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains one test case. Each case contains the records for one day. The case starts with a positive integer $M$, which is the total number of records, followed by $M$ lines, each in the format:</p><blockquote><p>ID_number Sign_in_time Sign_out_time</p></blockquote><p>where times are given in the format <code>HH:MM:SS</code>, and <code>ID_number</code> is a string with no more than 15 characters.</p><h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>For each test case, output in one line the ID numbers of the persons who have unlocked and locked the door on that day. The two ID numbers must be separated by one space.</p><p>Note: It is guaranteed that the records are consistent. That is, the sign in time must be earlier than the sign out time for each person, and there are no two persons sign in or out at the same moment.</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><blockquote><p>3<br>CS301111 15:30:28 17:00:10<br>SC3021234 08:00:00 11:25:25<br>CS301133 21:45:00 21:58:40</p></blockquote><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><blockquote><p>SC3021234 CS301133</p></blockquote><p><br></p><hr><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>直接比较字符串大小就行了。简单题直接上代码</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> M;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; M;</span><br><span class="line">    <span class="built_in">string</span> ID, timeIn, timeOut, first, last;</span><br><span class="line">    <span class="built_in">string</span> inMin = <span class="string">""</span>;</span><br><span class="line">    <span class="built_in">string</span> outMax = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;M; i++)&#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; ID &gt;&gt; timeIn &gt;&gt; timeOut;</span><br><span class="line">        <span class="keyword">if</span>(inMin == <span class="string">""</span> || timeIn &lt; inMin)&#123;</span><br><span class="line">            inMin = timeIn;</span><br><span class="line">            first = ID;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(outMax == <span class="string">""</span> || timeOut &gt; outMax)&#123;</span><br><span class="line">            outMax = timeOut;</span><br><span class="line">            last = ID;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; first &lt;&lt; <span class="string">" "</span> &lt;&lt; last &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Problem&quot;&gt;&lt;a href=&quot;#Problem&quot; class=&quot;headerlink&quot; title=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h2&gt;&lt;p&gt;At the beginning of every day, the first person wh
      
    
    </summary>
    
      <category term="PAT" scheme="https://iris-cyy.github.io/categories/PAT/"/>
    
      <category term="Advanced" scheme="https://iris-cyy.github.io/categories/PAT/Advanced/"/>
    
    
      <category term="PAT" scheme="https://iris-cyy.github.io/tags/PAT/"/>
    
  </entry>
  
  <entry>
    <title>【PAT-Advanced】1005 Spell It Right</title>
    <link href="https://iris-cyy.github.io//PAT/Advanced/2020-02-04/pat_1005/"/>
    <id>https://iris-cyy.github.io//PAT/Advanced/2020-02-04/pat_1005/</id>
    <published>2020-02-04T14:15:56.000Z</published>
    <updated>2020-02-05T09:03:55.950Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Given a non-negative integer $N$, your task is to compute the sum of all the digits of $N$, and output every digit of the sum in English.</p><h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains one test case. Each case occupies one line which contains an $N (≤10^{100})$.</p><h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>For each test case, output in one line the digits of the sum in English words. There must be one space between two consecutive words, but no extra space at the end of a line.</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><blockquote><p>12345</p></blockquote><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><blockquote><p>one five</p></blockquote><p><br></p><hr><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>还挺简单。</p><p>要注意的是两个点</p><ol><li>大数。最大可能是100位，所以读入的时候要用<code>string</code>而不是<code>int</code></li><li>输入是0的时候</li></ol><p>实现代码如下</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> input;</span><br><span class="line"><span class="built_in">string</span> output = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">trans</span><span class="params">(<span class="keyword">int</span> num)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(output != <span class="string">""</span>)&#123;</span><br><span class="line">        output = <span class="string">" "</span> + output;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">switch</span> (num)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            output = <span class="string">"one"</span> + output;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            output = <span class="string">"two"</span> + output;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            output = <span class="string">"three"</span> + output;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">            output = <span class="string">"four"</span> + output;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">            output = <span class="string">"five"</span> + output;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">            output = <span class="string">"six"</span> + output;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">            output = <span class="string">"seven"</span> + output;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">            output = <span class="string">"eight"</span> + output;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">            output = <span class="string">"nine"</span> + output;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            output = <span class="string">"zero"</span> + output;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; input;</span><br><span class="line">    <span class="keyword">int</span> length = input.length();</span><br><span class="line">    <span class="keyword">while</span>(length--)&#123;</span><br><span class="line">        sum += input[<span class="number">0</span>] - <span class="string">'0'</span>;</span><br><span class="line">        input = input.substr(<span class="number">1</span>, length+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(sum == <span class="number">0</span>)&#123;</span><br><span class="line">        output = <span class="string">"zero"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(sum)&#123;</span><br><span class="line">        trans(sum % <span class="number">10</span>);</span><br><span class="line">        sum /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; output &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Problem&quot;&gt;&lt;a href=&quot;#Problem&quot; class=&quot;headerlink&quot; title=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h2&gt;&lt;p&gt;Given a non-negative integer $N$, your task is to 
      
    
    </summary>
    
      <category term="PAT" scheme="https://iris-cyy.github.io/categories/PAT/"/>
    
      <category term="Advanced" scheme="https://iris-cyy.github.io/categories/PAT/Advanced/"/>
    
    
      <category term="PAT" scheme="https://iris-cyy.github.io/tags/PAT/"/>
    
  </entry>
  
  <entry>
    <title>【PAT-Advanced】1004 Counting Leaves</title>
    <link href="https://iris-cyy.github.io//PAT/Advanced/2020-02-04/pat_1004/"/>
    <id>https://iris-cyy.github.io//PAT/Advanced/2020-02-04/pat_1004/</id>
    <published>2020-02-04T04:05:47.000Z</published>
    <updated>2020-02-05T02:34:35.967Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>A family hierarchy is usually presented by a pedigree tree. Your job is to count those family members who have no child.</p><h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains one test case. Each case starts with a line containing 0&lt;$N$&lt;100, the number of nodes in a tree, and $M (&lt;N)$, the number of non-leaf nodes. Then $M$ lines follow, each in the format:</p><blockquote><p>ID K ID[1] ID[2] … ID[K]</p></blockquote><p>where <code>ID</code> is a two-digit number representing a given non-leaf node, <code>K</code> is the number of its children, followed by a sequence of two-digit <code>ID</code>‘s of its children. For the sake of simplicity, let us fix the root ID to be <code>01</code>.</p><p>The input ends with $N$ being 0. That case must NOT be processed.</p><h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>For each test case, you are supposed to count those family members who have no child <strong>for every seniority level</strong> starting from the root. The numbers must be printed in a line, separated by a space, and there must be no extra space at the end of each line.</p><p>The sample case represents a tree with only 2 nodes, where <code>01</code> is the root and <code>02</code> is its only child. Hence on the root <code>01</code>level, there is <code>0</code> leaf node; and on the next level, there is <code>1</code> leaf node. Then we should output <code>0 1</code> in a line.</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><blockquote><p>2 1<br>01 1 02</p></blockquote><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><blockquote><p>0 1</p></blockquote><p><br></p><hr><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>这题只要根据输入构建一颗树，记录每个节点的<code>child</code>, <code>parent</code>以及<code>level</code>，然后做一个层序遍历，输出每一层没有子节点的节点数即可。</p><p>这里有一个trick，关于<code>level</code>值的更新。发现测试点中大概ID从顶层往下依次增加，并且录入的顺序从小到大，这使得树的构建减少了根据新的父子关系更新整棵子树<code>level</code>值的情况。</p><p>实现代码如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 105</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> M = <span class="number">0</span>; <span class="comment">//number of non-leaf nodes</span></span><br><span class="line"><span class="keyword">int</span> N = <span class="number">0</span>; <span class="comment">//number of nodes</span></span><br><span class="line"><span class="keyword">int</span> leafNum[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> child_num;</span><br><span class="line">    <span class="keyword">int</span> level;</span><br><span class="line">    <span class="keyword">int</span> parent_id;</span><br><span class="line">&#125;Node[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;MAXN; i++)&#123;</span><br><span class="line">        Node[i].child_num = <span class="number">0</span>;</span><br><span class="line">        Node[i].level = <span class="number">0</span>;</span><br><span class="line">        Node[i].parent_id = <span class="number">0</span>;</span><br><span class="line">        leafNum[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    init();</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; N &gt;&gt; M;</span><br><span class="line">    <span class="keyword">if</span>(N == <span class="number">0</span> || M &gt; N)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> id, child_id;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;M; i++)&#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; id;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; Node[id].child_num;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;Node[id].child_num; j++)&#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; child_id;</span><br><span class="line">            Node[child_id].parent_id = id;</span><br><span class="line">            <span class="comment">//如果会出现乱序情况，大概要在这里加更新level值，</span></span><br><span class="line">            <span class="comment">//并且要加判断，如果child有子节点，则在更新了level之后也要顺便更新子树所有节点的level</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Node[<span class="number">1</span>].level = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=N; i++)&#123;</span><br><span class="line">        Node[i].level = Node[Node[i].parent_id].level + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> maxlevel = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=N; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(Node[i].level &gt; maxlevel)&#123;</span><br><span class="line">            maxlevel = Node[i].level;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(Node[i].child_num == <span class="number">0</span>)&#123;</span><br><span class="line">            leafNum[Node[i].level]++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;maxlevel; i++)&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; leafNum[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; leafNum[maxlevel] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>后来在网上发现另外一个做法，用的dfs，还挺妙，代码贴在下面，也可以看<a href="https://blog.csdn.net/richenyunqi/article/details/79533166" target="_blank" rel="noopener">原博客</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;tree(<span class="number">100</span>);<span class="comment">//下标存储结点编号，元素内容存储儿子结点编号</span></span><br><span class="line"><span class="keyword">int</span> leaveNumOfLevel[<span class="number">100</span>],maxLevel=<span class="number">-1</span>;<span class="comment">//每层叶子节点数、最大层数</span></span><br><span class="line"><span class="keyword">int</span> N,M;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> level)</span></span>&#123;<span class="comment">//深度优先遍历</span></span><br><span class="line">    maxLevel=<span class="built_in">max</span>(level,maxLevel);<span class="comment">//更新最大层数</span></span><br><span class="line">    <span class="keyword">if</span>(tree[v].empty())<span class="comment">//如果没有儿子结点，则为叶节点</span></span><br><span class="line">        ++leaveNumOfLevel[level];<span class="comment">//递增该节点所处层数下的叶节点数目</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i:tree[v])<span class="comment">//不是叶节点</span></span><br><span class="line">        DFS(i,level+<span class="number">1</span>);<span class="comment">//递归遍历儿子结点</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;N,&amp;M);</span><br><span class="line">    <span class="keyword">while</span>(M--)&#123;</span><br><span class="line">        <span class="keyword">int</span> id,k;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;id,&amp;k);</span><br><span class="line">        <span class="keyword">while</span>(k--)&#123;</span><br><span class="line">            <span class="keyword">int</span> iid;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;iid);</span><br><span class="line">            tree[id].push_back(iid);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    DFS(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=maxLevel;++i)<span class="comment">//输出每层叶子节点数</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s%d"</span>,i==<span class="number">0</span>?<span class="string">""</span>:<span class="string">" "</span>,leaveNumOfLevel[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Problem&quot;&gt;&lt;a href=&quot;#Problem&quot; class=&quot;headerlink&quot; title=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h2&gt;&lt;p&gt;A family hierarchy is usually presented by a pedig
      
    
    </summary>
    
      <category term="PAT" scheme="https://iris-cyy.github.io/categories/PAT/"/>
    
      <category term="Advanced" scheme="https://iris-cyy.github.io/categories/PAT/Advanced/"/>
    
    
      <category term="PAT" scheme="https://iris-cyy.github.io/tags/PAT/"/>
    
  </entry>
  
  <entry>
    <title>【CV】Learning CNN</title>
    <link href="https://iris-cyy.github.io//Notes/Computer-Vision/2020-02-03/learning_CNN/"/>
    <id>https://iris-cyy.github.io//Notes/Computer-Vision/2020-02-03/learning_CNN/</id>
    <published>2020-02-03T05:12:45.000Z</published>
    <updated>2020-02-03T05:15:59.355Z</updated>
    
    <content type="html"><![CDATA[<h2 id="已实现的功能简述及运行简要说明"><a href="#已实现的功能简述及运行简要说明" class="headerlink" title="已实现的功能简述及运行简要说明"></a>已实现的功能简述及运行简要说明</h2><h3 id="功能简述"><a href="#功能简述" class="headerlink" title="功能简述"></a>功能简述</h3><p>​    利用CNN进行手写数字识别与物体分类:</p><ol><li>使用PyTorch工具实现最基本的卷积神经网络(CNN) LeNet-5以及一个物体分类的CNN</li><li>用MNIST手写数字数据集（0-9一共十个数字）6万样本实现对LeNet-5的训练，对MNIST的1万测试样本进行测试，获得识别率。</li><li>用CIFAR-10数据库实现CNN物体分类功能的训练与测试。</li></ol><h3 id="运行简要说明"><a href="#运行简要说明" class="headerlink" title="运行简要说明"></a>运行简要说明</h3><p>​    由于本次实验使用的两个测试集都比较经典，在torchvision库中都已经做了封装，因此在本实验中选择了直接调用。运行程序后，将先将指定数据集下载到指定路径中，然后再进行训练。为了节省下载时间，也可以将下载好的数据集添加到对应路径（<code>./data/</code>）中直接进行训练。</p><p>​    <code>MNIST.py</code>用于训练MNIST测试集，<code>CIFAR.py</code>用于训练CIFAR-10测试集。</p><p><br></p><h2 id="开发与运行环境"><a href="#开发与运行环境" class="headerlink" title="开发与运行环境"></a>开发与运行环境</h2><p>​    操作系统：Windows 10，64位<br>​    开发环境：Python 3.7.3<br>​    库环境：numpy 1.16.4, torch 1.1.0, torchvision 0.3.0</p><h2 id="算法基本思路、原理"><a href="#算法基本思路、原理" class="headerlink" title="算法基本思路、原理"></a>算法基本思路、原理</h2><h3 id="CNN"><a href="#CNN" class="headerlink" title="CNN"></a>CNN</h3><p>​    卷积神经网络(Convolutional Neural Network, CNN)是深度学习技术中极具代表的网络结构之一，在图像处理领域取得了很大的成功。CNN相较于传统的图像处理算法的优点之一在于，避免了对图像复杂的前期预处理过程（提取人工特征等），可以直接输入原始图像。</p><p>​    CNN中主要有两种类型的网络层，分别是卷积层和池化/采样层。</p><p>​    卷积层的作用是提取图像的各种特征，是卷积核在上一级输入层上通过逐一滑动窗口计算而得，卷积核中的每一个参数都相当于传统神经网络中的权值参数，与对应的局部像素相连接，将卷积核的各个参数与对应的局部像素值相乘之和，（通常还要再加上一个偏置参数），得到卷积层上的结果。</p><p>​    池化层的作用是对原始特征信号进行抽象，从而大幅度减少训练参数，另外还可以减轻模型过拟合的程度。池化/采样的方式通常有以下两种：</p><ul><li>Max-Pooling: 选择Pooling窗口中的最大值作为采样值；</li><li>Mean-Pooling: 将Pooling窗口中的所有值相加取平均，以平均值作为采样值；</li></ul><h3 id="LeNet-5"><a href="#LeNet-5" class="headerlink" title="LeNet-5"></a>LeNet-5</h3><p>​    LeNet-5是一种经典的CNN网络结构，其结构如下图：</p><p><img src="/images/cv/cnn/image-20191231174428209.png" alt="image-20191231174428209"></p><h4 id="输入层"><a href="#输入层" class="headerlink" title="输入层"></a>输入层</h4><p>​    将输入数据的尺寸统一归一化为$32 \times 32$</p><h4 id="卷积层1"><a href="#卷积层1" class="headerlink" title="卷积层1"></a>卷积层1</h4><p>​    使用6个大小为$5 \times 5$的卷积核对输入图像进行第一次卷积运算，得到6个大小为28 * 28的feature map</p><h4 id="池化层1"><a href="#池化层1" class="headerlink" title="池化层1"></a>池化层1</h4><p>​    使用$2 \times 2$的核对第一次卷积之后得到的结果进行池化，得到6个$14\times14$的map</p><h4 id="卷积层2"><a href="#卷积层2" class="headerlink" title="卷积层2"></a>卷积层2</h4><p>​    对上一层池化得到的输出进行组合，将6个特征增加为16个，使用16种$5\times 5$的卷积核进行卷积操作，得到16个$10\times10$的特征图。特征的组合如下：</p><p><img src="/images/cv/cnn/image-20191231225943896.png" alt="image-20191231225943896" style="zoom:67%;" /></p><h4 id="池化层2"><a href="#池化层2" class="headerlink" title="池化层2"></a>池化层2</h4><p>​    对输入的$10\times10$的特征图，使用$2\times2$的核进行池化，得到16个$5\times5$的feature map</p><h4 id="卷积层3"><a href="#卷积层3" class="headerlink" title="卷积层3"></a>卷积层3</h4><p>​    使用120种$5\times5$的卷积核进行卷积，输出120个$1\times1$的feature map</p><h4 id="全连接层"><a href="#全连接层" class="headerlink" title="全连接层"></a>全连接层</h4><p>​    使用全连接层将上一层输出的120个节点与本层的84个节点进行全连接</p><h4 id="输出层"><a href="#输出层" class="headerlink" title="输出层"></a>输出层</h4><p>​    将前一层的84个节点转换为输出的大小（与输出大小进行全连接）</p><h3 id="MNIST手写数据集"><a href="#MNIST手写数据集" class="headerlink" title="MNIST手写数据集"></a>MNIST手写数据集</h3><p>​    MNIST数据集是机器学习领域中非常经典的一个数据集，由60000个训练样本和10000个测试样本组成，每个样本都是一张28 * 28像素的灰度手写数字图片。</p><p>​    图片示例如下：</p><p><img src="/images/cv/cnn/image-20200101014446671.png" alt="image-20200101014446671" style="zoom: 25%;" /></p><h3 id="CIFAR-10数据集"><a href="#CIFAR-10数据集" class="headerlink" title="CIFAR-10数据集"></a>CIFAR-10数据集</h3><p>​    CIFAR-10数据集由10个类的60000个32x32彩色图像组成，每个类有6000个图像。有50000个训练图像和10000个测试图像。<br>​    数据集分为五个训练批次和一个测试批次，每个批次有10000个图像。测试批次包含来自每个类别的恰好1000个随机选择的图像。训练批次以随机顺序包含剩余图像，但一些训练批次可能包含来自一个类别的图像比另一个更多。总体来说，五个训练集之和包含来自每个类的正好5000张图像。<br>​    以下是数据集中的类，以及来自每个类的10个随机图像：</p><p><img src="/images/cv/cnn/image-20200101014334677.png" alt="image-20200101014334677" style="zoom: 67%;" /></p><p><br></p><h2 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h2><h3 id="LeNet5网络搭建"><a href="#LeNet5网络搭建" class="headerlink" title="LeNet5网络搭建"></a>LeNet5网络搭建</h3><p>​    根据上述LeNet5的每一层结构，搭建LeNet5神经网络</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">leNet5</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, input_size, output_size)</span>:</span></span><br><span class="line">        super(leNet5, self).__init__()</span><br><span class="line">        padding = (int)((<span class="number">32</span> - np.sqrt(input_size) )/<span class="number">2</span>)</span><br><span class="line">        channel_num = <span class="number">1</span> </span><br><span class="line">        self.c1 = nn.Conv2d(channel_num, <span class="number">6</span>, <span class="number">5</span>, padding = padding)</span><br><span class="line">        self.s2 = nn.MaxPool2d(kernel_size = <span class="number">2</span>, stride = <span class="number">2</span>)</span><br><span class="line">        self.c3 = nn.Conv2d(<span class="number">6</span>, <span class="number">16</span>, <span class="number">5</span>)</span><br><span class="line">        self.s4 = nn.MaxPool2d(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">        self.c5 = nn.Conv2d(<span class="number">16</span>, <span class="number">120</span>, <span class="number">5</span>)</span><br><span class="line">        self.f6 = nn.Linear(<span class="number">120</span>, <span class="number">84</span>)</span><br><span class="line">        self.output = nn.Linear(<span class="number">84</span>, output_size)</span><br><span class="line">        self.relu = nn.ReLU()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        x = self.relu(self.c1(x))</span><br><span class="line">        x = self.relu(self.s2(x))</span><br><span class="line">        x = self.relu(self.c3(x))</span><br><span class="line">        x = self.relu(self.s4(x))</span><br><span class="line">        x = self.relu(self.c5(x))</span><br><span class="line">        x = x.view(x.size()[<span class="number">0</span>], <span class="number">-1</span>)</span><br><span class="line">        x = self.relu(self.f6(x))</span><br><span class="line">        x = self.output(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure><h3 id="MNIST手写数据集测试"><a href="#MNIST手写数据集测试" class="headerlink" title="MNIST手写数据集测试"></a>MNIST手写数据集测试</h3><p>​    相关参数设置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">input_size = <span class="number">28</span> * <span class="number">28</span></span><br><span class="line">output_size = <span class="number">10</span></span><br><span class="line">channel_num = <span class="number">1</span></span><br><span class="line">num_epochs = <span class="number">20</span></span><br><span class="line">batch_size = <span class="number">64</span></span><br><span class="line">learning_rate = <span class="number">0.4</span></span><br></pre></td></tr></table></figure><p>​    下载MNIST数据集并进行读取</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">train_dataset = torchvision.datasets.MNIST(root=<span class="string">'./data'</span>,train=<span class="literal">True</span>, transform=transforms.ToTensor(), download=<span class="literal">True</span>) </span><br><span class="line">test_dataset = torchvision.datasets.MNIST(root=<span class="string">'./data'</span>,train=<span class="literal">False</span>, transform=transforms.ToTensor(), download=<span class="literal">True</span>)</span><br><span class="line">train_loader = torch.utils.data.DataLoader(dataset=train_dataset, batch_size=batch_size, shuffle=<span class="literal">True</span>)</span><br><span class="line">test_loader = torch.utils.data.DataLoader(dataset=test_dataset, batch_size=batch_size, shuffle=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><p>​    损失函数及优化器设计</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lossFunction = nn.CrossEntropyLoss()</span><br><span class="line">optimizer = optim.SGD(model.parameters(), lr=learning_rate)</span><br></pre></td></tr></table></figure><p>​    训练网络</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> range(num_epochs):</span><br><span class="line">    <span class="keyword">for</span> i, (images,labels) <span class="keyword">in</span> enumerate(train_loader):</span><br><span class="line">        out = model(images)</span><br><span class="line">        loss = lossFunction(out,labels)</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (i+<span class="number">1</span>) % <span class="number">100</span> == <span class="number">0</span>:</span><br><span class="line">            print(<span class="string">'Epoch [&#123;&#125;/&#123;&#125;], Step [&#123;&#125;/&#123;&#125;], Loss: &#123;:.4f&#125;'</span> .format(epoch+<span class="number">1</span>, num_epochs, i+<span class="number">1</span>, total_step, loss.item()))</span><br></pre></td></tr></table></figure><h3 id="CIFAR-10数据集测试"><a href="#CIFAR-10数据集测试" class="headerlink" title="CIFAR-10数据集测试"></a>CIFAR-10数据集测试</h3><p>​    相关参数设置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">input_size = <span class="number">32</span> * <span class="number">32</span></span><br><span class="line">output_size = <span class="number">10</span></span><br><span class="line">channel_num = <span class="number">3</span></span><br><span class="line">num_epochs = <span class="number">20</span></span><br><span class="line">batch_size = <span class="number">128</span></span><br><span class="line">learning_rate = <span class="number">0.001</span></span><br></pre></td></tr></table></figure><p>​    下载数据集并进行读取</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">train_dataset = torchvision.datasets.CIFAR10(root=<span class="string">'./data'</span>,train=<span class="literal">True</span>, transform=transforms.ToTensor(), download=<span class="literal">True</span>) </span><br><span class="line">test_dataset = torchvision.datasets.CIFAR10(root=<span class="string">'./data'</span>,train=<span class="literal">False</span>, transform=transforms.ToTensor(), download=<span class="literal">True</span>)</span><br><span class="line">train_loader = torch.utils.data.DataLoader(dataset=train_dataset, batch_size=batch_size, shuffle=<span class="literal">True</span>)</span><br><span class="line">test_loader = torch.utils.data.DataLoader(dataset=test_dataset, batch_size=batch_size, shuffle=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><p>​    损失函数及优化器设计</p><p>​    由于CIFAR-10数据集与MNIST相比更为复杂，因此使用Adam作为优化器，实验证明识别率确实比SGD更高</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lossFunction = nn.CrossEntropyLoss()</span><br><span class="line">optimizer = optim.Adam(model.parameters(), lr=learning_rate)</span><br></pre></td></tr></table></figure><p>​    网络训练部分与MNIST类似</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;已实现的功能简述及运行简要说明&quot;&gt;&lt;a href=&quot;#已实现的功能简述及运行简要说明&quot; class=&quot;headerlink&quot; title=&quot;已实现的功能简述及运行简要说明&quot;&gt;&lt;/a&gt;已实现的功能简述及运行简要说明&lt;/h2&gt;&lt;h3 id=&quot;功能简述&quot;&gt;&lt;a href
      
    
    </summary>
    
      <category term="Notes" scheme="https://iris-cyy.github.io/categories/Notes/"/>
    
      <category term="Computer Vision" scheme="https://iris-cyy.github.io/categories/Notes/Computer-Vision/"/>
    
    
      <category term="Notes" scheme="https://iris-cyy.github.io/tags/Notes/"/>
    
      <category term="CV" scheme="https://iris-cyy.github.io/tags/CV/"/>
    
  </entry>
  
  <entry>
    <title>【CV】Image Stitching</title>
    <link href="https://iris-cyy.github.io//Notes/Computer-Vision/2020-02-03/image_stitching/"/>
    <id>https://iris-cyy.github.io//Notes/Computer-Vision/2020-02-03/image_stitching/</id>
    <published>2020-02-03T05:07:54.000Z</published>
    <updated>2020-02-03T05:11:48.970Z</updated>
    
    <content type="html"><![CDATA[<h2 id="已实现的功能简述及运行简要说明"><a href="#已实现的功能简述及运行简要说明" class="headerlink" title="已实现的功能简述及运行简要说明"></a>已实现的功能简述及运行简要说明</h2><h3 id="功能简述"><a href="#功能简述" class="headerlink" title="功能简述"></a>功能简述</h3><p>​    对输入的多张彩色图像，可以自动拼接成全景图像，同时对拼接边缘部分进行融合处理。</p><h3 id="运行简要说明"><a href="#运行简要说明" class="headerlink" title="运行简要说明"></a>运行简要说明</h3><p>​    <code>img1</code>，<code>img2</code>，… 存储读取图像的路径，生成的全景图像将在result窗口中显示，并存储为result.jpg在与代码相同目录下。</p><p><br></p><h2 id="开发与运行环境"><a href="#开发与运行环境" class="headerlink" title="开发与运行环境"></a>开发与运行环境</h2><p>​    操作系统：Windows 10，64位<br>​    开发环境：Python 3.7.3<br>​    库环境：numpy 1.16.4, cv2 3.4.2</p><p><br></p><h2 id="算法基本思路、原理"><a href="#算法基本思路、原理" class="headerlink" title="算法基本思路、原理"></a>算法基本思路、原理</h2><h3 id="SIFT特征提取"><a href="#SIFT特征提取" class="headerlink" title="SIFT特征提取"></a>SIFT特征提取</h3><p>​    SIFT即Scale Invariant Feature Transform，尺度不变特征变换。主要包含尺度空间的极值检测、特征点定位、特征方向赋值、特征点描述四个步骤。</p><p>​    首先由不同高斯卷积得到图像的高斯尺寸空间</p><p><img src="/images/cv/image_stitching/image-20191221213624451.png" alt="image-20191221213624451" style="zoom:80%;" /></p><p>​    其中，$G(x,y,σ)$是高斯核函数，$σ$代表尺度空间因子，是高斯正态分布的标准差，反应了被模糊的程度，其值越大，模糊程度越高，尺度也就越大。$L(x,y,σ)$代表高斯尺度空间，构建好后就可以检测出在不同尺度下的特征点。特征点的检测可以使用LoG算子，但是LoG的运算量过于大，通常使用的DoG，即差分高斯。</p><p><img src="/images/cv/image_stitching/image-20191221213738519.png" alt="image-20191221213738519" style="zoom:80%;" /></p><p>​    DoG是由两个相邻的高斯空间图像相减得到的。所以需要得到一系列的高斯空间尺度，可以在对图像平滑和向下取样得到结果的基础上加上高斯滤波，即对向下取样的每层图像使用不同的尺度空间因子$σ$进行模糊。通过这样的方式，通过相邻两层相减就可以得到DoG的集合。</p><p>​    为了寻找尺度空间的极值点，每个像素点要和其图像域（同一尺度空间）和尺度域（相邻的尺度空间）的所有相邻点进行比较，当其大于（或者小于）所有相邻点时，该点就是极值点。</p><p><img src="/images/cv/image_stitching/image-20191221213900801.png" alt="image-20191221213900801" style="zoom: 50%;" /></p><p>​    利用特征点邻域像素的梯度分布特性来确定其方向参数，再利用图像的梯度直方图求取关键点局部结构的稳定方向。</p><p><img src="/images/cv/image_stitching/image-20191221220450416.png" alt="image-20191221220450416" style="zoom: 50%;" /></p><h3 id="特征点匹配"><a href="#特征点匹配" class="headerlink" title="特征点匹配"></a>特征点匹配</h3><p>​    通过K邻近算法将之前使用SIFT算法得到的特征点以及相应特征描述进行匹配。使用KNN算法找到最近邻的两个数据点，如果这两个点的距离比值小于指定的值，那么我们就可以认为这两个点是最接近的，并认为这两个点是好的匹配点加入到我们的列表中。</p><h3 id="图像变换"><a href="#图像变换" class="headerlink" title="图像变换"></a>图像变换</h3><p>​    通过Homography矩阵进行图像变换。使用之前得到的匹配点计算Homography矩阵。通过矩阵的表达式可以看出，需要求解这六个未知数需要用到三对匹配点。而这些点的选择将通过RANSAC算法来进行。</p><p><img src="/images/cv/image_stitching/image-20191221221017082.png" alt="image-20191221221017082" style="zoom: 40%;" /></p><p>​    RANSAC算法即随机抽样一致算法（Random Sample Consensus）。将从数据中随机选择的点定位内点，拟合模型，然后将其他点带入模型中，如果Loss在指定阈值之内，则将这些点标为内点。如果内点数量足够多则可以认为模型比较理想。重复以上步骤得到最理想的模型。</p><h3 id="图像融合"><a href="#图像融合" class="headerlink" title="图像融合"></a>图像融合</h3><p>​    一种图像融合的方式是，使用高斯金字塔和拉普拉斯金字塔，对尺寸相同但是内容不同的两张图片进行无缝连接。算法及示例如下：</p><p><img src="/images/cv/image_stitching/image-20191221222509555.png" alt="image-20191221222509555" style="zoom: 40%;" /></p><p><img src="/images/cv/image_stitching/image-20191221222537361.png" alt="image-20191221222537361" style="zoom:50%;" /></p><p><img src="/images/cv/image_stitching/image-20191221222639642.png" alt="image-20191221222639642" style="zoom: 33%;" /></p><p>​    在本项目的实现，即全景图片的拼接中，由于拼接部分内容相似，只是可能存在色差等问题，因此采用更为简便的方法。即根据当前像素点与待融合部分左边缘的距离，选择递增的权重，在待融合部分进行渐变显示。<br>$$<br>output\,[i,\,j] = img_left\,[i,\,j] \times (1-\alpha) \; + \; img_right\,[i,\,j] \times \alpha<br>$$</p><p>$$<br>\alpha = \frac{j-leftend}{rightend-leftend}<br>$$</p><p><br></p><h2 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h2><h3 id="特征提取"><a href="#特征提取" class="headerlink" title="特征提取"></a>特征提取</h3><p>​    直接调用opencv中的SIFT相关函数进行特征匹配，实现方式如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sift_compute</span><span class="params">(img)</span>:</span></span><br><span class="line">    sift = cv2.xfeatures2d.SIFT_create()</span><br><span class="line">    kp, des = sift.detectAndCompute(img, <span class="literal">None</span>)</span><br><span class="line">    kp_img = cv2.drawKeypoints(img, kp, <span class="literal">None</span>)</span><br><span class="line">    <span class="keyword">return</span> kp_img, kp, des</span><br></pre></td></tr></table></figure><h3 id="特征点匹配-1"><a href="#特征点匹配-1" class="headerlink" title="特征点匹配"></a>特征点匹配</h3><p>​    调用knnMatch函数进行特征点匹配，如果距离相近，则认为是好的匹配</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bf = cv2.BFMatcher()</span><br><span class="line">matches = bf.knnMatch(des1, des2, k=<span class="number">2</span>)</span><br><span class="line">k = <span class="number">0.75</span></span><br><span class="line">goodMatch = []</span><br><span class="line"><span class="keyword">for</span> (i, j) <span class="keyword">in</span> matches:</span><br><span class="line">    <span class="keyword">if</span> i.distance &lt; k * j.distance:</span><br><span class="line">        goodMatch.append(i)</span><br></pre></td></tr></table></figure><h3 id="图像变换-1"><a href="#图像变换-1" class="headerlink" title="图像变换"></a>图像变换</h3><p>​    调用函数，利用RANSAC算法计算Homography矩阵，并进行图像变换</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#fitting transformation</span></span><br><span class="line">ptsA= np.float32([kp1[m.queryIdx].pt <span class="keyword">for</span> m <span class="keyword">in</span> goodMatch]).reshape(<span class="number">-1</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">ptsB = np.float32([kp2[m.trainIdx].pt <span class="keyword">for</span> m <span class="keyword">in</span> goodMatch]).reshape(<span class="number">-1</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">ransacReprojThreshold = <span class="number">4</span>  </span><br><span class="line"><span class="comment">#compute Homography matrix by RANSAC</span></span><br><span class="line">H, status =cv2.findHomography(ptsA,ptsB,cv2.RANSAC,ransacReprojThreshold)</span><br></pre></td></tr></table></figure><h3 id="图像融合-1"><a href="#图像融合-1" class="headerlink" title="图像融合"></a>图像融合</h3><p>​    将位于左边的图片作为要叠加的图片，位于右边的图片（之前进行变换的图片）作为被叠加的图片。为了除去黑色边缘，检测左边图片的像素点，若不在黑边区域则进行显示，否则不显示。此外，若检测得到当前位置为两张图片的重叠区域，则进行融合处理。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#blending</span></span><br><span class="line">mask_start = <span class="number">0</span> <span class="comment">#the left index of blending</span></span><br><span class="line">mask_end = img_left.shape[<span class="number">1</span>] <span class="comment">#the right index of blending</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(img_left.shape[<span class="number">1</span>]):</span><br><span class="line">    <span class="keyword">if</span> imgOutput[<span class="number">0</span>,i,:].any() != <span class="number">0</span>:</span><br><span class="line">        mask_start = i</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="comment">#to avoid black edges, if the pixel is black, don't show it</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(img_left.shape[<span class="number">0</span>]):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(img_left.shape[<span class="number">1</span>]<span class="number">-1</span>):              </span><br><span class="line">        <span class="keyword">if</span> img_left[i,j+<span class="number">1</span>,:].any() != <span class="number">0</span>:           </span><br><span class="line">            <span class="comment">#in the overlap of two pictures, if the pixel is not so different, apply blending       </span></span><br><span class="line">            <span class="keyword">if</span> imgOutput[i,j,:].any() != <span class="number">0</span> <span class="keyword">and</span> <span class="keyword">not</span> isdist(imgOutput[i,j], img_left[i,j]):</span><br><span class="line">                alpha = (j-mask_start) / (mask_end-mask_start)</span><br><span class="line">                imgOutput[i,j] = img_left[i,j] * (<span class="number">1</span>-alpha) + imgOutput[i,j] * alpha</span><br><span class="line">            <span class="keyword">else</span>:    </span><br><span class="line">                imgOutput[i,j] = img_left[i,j]</span><br></pre></td></tr></table></figure><h3 id="显示处理"><a href="#显示处理" class="headerlink" title="显示处理"></a>显示处理</h3><p>​    去除拼接后图像空白的部分</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rows, cols &#x3D; np.where(imgIn[:,:,0] !&#x3D;0)</span><br><span class="line">min_row, max_row &#x3D; min(rows), max(rows) +1</span><br><span class="line">min_col, max_col &#x3D; min(cols), max(cols) +1</span><br><span class="line">imgOut &#x3D; imgIn[min_row:max_row,min_col:max_col,:]</span><br><span class="line">return imgOut</span><br></pre></td></tr></table></figure><p><br></p><h2 id="实验结果与分析"><a href="#实验结果与分析" class="headerlink" title="实验结果与分析"></a>实验结果与分析</h2><h3 id="yosemite-test"><a href="#yosemite-test" class="headerlink" title="yosemite-test"></a>yosemite-test</h3><h4 id="特征点图"><a href="#特征点图" class="headerlink" title="特征点图"></a>特征点图</h4><p><img src="/images/cv/image_stitching/image-20191221224226332.png" alt="image-20191221224226332" style="zoom:50%;" /></p><h4 id="特征点匹配图"><a href="#特征点匹配图" class="headerlink" title="特征点匹配图"></a>特征点匹配图</h4><p><img src="/images/cv/image_stitching/image-20191221224253606.png" alt="image-20191221224253606" style="zoom:67%;" /></p><h4 id="Homography图像变换"><a href="#Homography图像变换" class="headerlink" title="Homography图像变换"></a>Homography图像变换</h4><p><img src="/images/cv/image_stitching/image-20191221224530256.png" alt="image-20191221224530256" style="zoom:67%;" /></p><h4 id="最终拼接结果"><a href="#最终拼接结果" class="headerlink" title="最终拼接结果"></a>最终拼接结果</h4><p><img src="/images/cv/image_stitching/image-20191221224632376.png" alt="image-20191221224632376"></p><h3 id="其他测试图"><a href="#其他测试图" class="headerlink" title="其他测试图"></a>其他测试图</h3><p>​    使用自己拍摄的图像进行拼接，结果如下：</p><p><img src="/images/cv/image_stitching/image-20191222190616426.png" alt="image-20191222190616426"></p><p>​    可以看出来结果不尽如人意。分析原因可能有以下几点：</p><ol><li>使用手机进行拍摄，在拍摄时就可以发现，镜头边缘变形非常严重，这可能导致了在图像进行拼接时，由于边缘变形导致Homography矩阵出现偏差，这种变形进行累加将导致待拼接的图像数量越多，整体变形越严重</li><li>在本项目的拼接处理中，以最左边的图片作为基准，对其他图片进行变换并融合叠加，这在一定程度上加大了最右边图像所需要做的变形。猜测如果以最中间图片作为基准，对两边图片进行变换，将会有更好的效果</li></ol><p>​    为了验证以上两点猜想，用手机全景照相功能拍摄了一张全景图像，裁剪成多张图片之后再进行拼接，得到结果如下：</p><p><img src="/images/cv/image_stitching/image-20191222190047773.png" alt="image-20191222190047773"></p><p>​    可以看出来效果符合预期，说明之前不符合预期的情况确实可能是由于以上原因。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;已实现的功能简述及运行简要说明&quot;&gt;&lt;a href=&quot;#已实现的功能简述及运行简要说明&quot; class=&quot;headerlink&quot; title=&quot;已实现的功能简述及运行简要说明&quot;&gt;&lt;/a&gt;已实现的功能简述及运行简要说明&lt;/h2&gt;&lt;h3 id=&quot;功能简述&quot;&gt;&lt;a href
      
    
    </summary>
    
      <category term="Notes" scheme="https://iris-cyy.github.io/categories/Notes/"/>
    
      <category term="Computer Vision" scheme="https://iris-cyy.github.io/categories/Notes/Computer-Vision/"/>
    
    
      <category term="Notes" scheme="https://iris-cyy.github.io/tags/Notes/"/>
    
      <category term="CV" scheme="https://iris-cyy.github.io/tags/CV/"/>
    
  </entry>
  
</feed>
